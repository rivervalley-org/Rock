{"version":3,"file":"componentFromUrl.js","sources":["../../../Framework/Controls/componentFromUrl.ts"],"sourcesContent":["ï»¿// <copyright>\r\n// Copyright by the Spark Development Network\r\n//\r\n// Licensed under the Rock Community License (the \"License\");\r\n// you may not use this file except in compliance with the License.\r\n// You may obtain a copy of the License at\r\n//\r\n// http://www.rockrms.com/license\r\n//\r\n// Unless required by applicable law or agreed to in writing, software\r\n// distributed under the License is distributed on an \"AS IS\" BASIS,\r\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n// See the License for the specific language governing permissions and\r\n// limitations under the License.\r\n// </copyright>\r\n//\r\n\r\nimport { Component, defineComponent, markRaw, PropType } from \"vue\";\r\nimport NotificationBox from \"./notificationBox.obs\";\r\nimport LoadingIndicator from \"./loadingIndicator\";\r\n\r\nexport default defineComponent({\r\n    name: \"ComponentFromUrl\",\r\n    components: {\r\n        LoadingIndicator,\r\n        NotificationBox\r\n    },\r\n    props: {\r\n        url: {\r\n            type: String as PropType<string>,\r\n            required: true\r\n        }\r\n    },\r\n    data() {\r\n        return {\r\n            control: null as Component | null,\r\n            loading: true,\r\n            error: \"\"\r\n        };\r\n    },\r\n    async created() {\r\n        if (!this.url) {\r\n            this.error = `Could not load the control because no URL was provided`;\r\n            this.loading = false;\r\n            return;\r\n        }\r\n\r\n        try {\r\n            const controlComponentModule = await import(this.url);\r\n            const control = controlComponentModule ?\r\n                (controlComponentModule.default || controlComponentModule) :\r\n                null;\r\n\r\n            if (control) {\r\n                this.control = markRaw(control);\r\n            }\r\n        }\r\n        catch (e) {\r\n            console.error(e);\r\n            this.error = `Could not load the control for '${this.url}'`;\r\n        }\r\n        finally {\r\n            this.loading = false;\r\n\r\n            if (!this.control) {\r\n                this.error = `Could not load the control for '${this.url}'`;\r\n            }\r\n        }\r\n    },\r\n    template: `\r\n<NotificationBox v-if=\"error\" alertType=\"danger\">{{error}}</NotificationBox>\r\n<LoadingIndicator v-else-if=\"loading\" />\r\n<component v-else :is=\"control\" />`\r\n});\r\n"],"names":["defineComponent","name","components","LoadingIndicator","NotificationBox","props","url","type","String","required","data","control","loading","error","created","_this","_asyncToGenerator","controlComponentModule","default","markRaw","e","console","concat","template"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqBA,gDAAeA,eAAe,CAAC;MAC3BC,EAAAA,IAAI,EAAE,kBAAkB;MACxBC,EAAAA,UAAU,EAAE;UACRC,gBAAgB;MAChBC,IAAAA,eAAAA;SACH;MACDC,EAAAA,KAAK,EAAE;MACHC,IAAAA,GAAG,EAAE;MACDC,MAAAA,IAAI,EAAEC,MAA0B;MAChCC,MAAAA,QAAQ,EAAE,IAAA;MACd,KAAA;SACH;MACDC,EAAAA,IAAIA,GAAG;UACH,OAAO;MACHC,MAAAA,OAAO,EAAE,IAAwB;MACjCC,MAAAA,OAAO,EAAE,IAAI;MACbC,MAAAA,KAAK,EAAE,EAAA;WACV,CAAA;SACJ;MACKC,EAAAA,OAAOA,GAAG;MAAA,IAAA,IAAAC,KAAA,GAAA,IAAA,CAAA;MAAA,IAAA,OAAAC,iBAAA,CAAA,aAAA;MACZ,MAAA,IAAI,CAACD,KAAI,CAACT,GAAG,EAAE;cACXS,KAAI,CAACF,KAAK,GAA2D,wDAAA,CAAA;cACrEE,KAAI,CAACH,OAAO,GAAG,KAAK,CAAA;MACpB,QAAA,OAAA;MACJ,OAAA;YAEA,IAAI;MACA,QAAA,IAAMK,sBAAsB,GAAS,MAAA,cAAOF,KAAI,CAACT,GAAG,CAAC,CAAA;cACrD,IAAMK,OAAO,GAAGM,sBAAsB,GACjCA,sBAAsB,CAACC,OAAO,IAAID,sBAAsB,GACzD,IAAI,CAAA;MAER,QAAA,IAAIN,OAAO,EAAE;MACTI,UAAAA,KAAI,CAACJ,OAAO,GAAGQ,OAAO,CAACR,OAAO,CAAC,CAAA;MACnC,SAAA;aACH,CACD,OAAOS,CAAC,EAAE;MACNC,QAAAA,OAAO,CAACR,KAAK,CAACO,CAAC,CAAC,CAAA;cAChBL,KAAI,CAACF,KAAK,GAAAS,kCAAAA,CAAAA,MAAA,CAAsCP,KAAI,CAACT,GAAG,EAAG,GAAA,CAAA,CAAA;MAC/D,OAAC,SACO;cACJS,KAAI,CAACH,OAAO,GAAG,KAAK,CAAA;MAEpB,QAAA,IAAI,CAACG,KAAI,CAACJ,OAAO,EAAE;gBACfI,KAAI,CAACF,KAAK,GAAAS,kCAAAA,CAAAA,MAAA,CAAsCP,KAAI,CAACT,GAAG,EAAG,GAAA,CAAA,CAAA;MAC/D,SAAA;MACJ,OAAA;MAAC,KAAA,CAAA,EAAA,CAAA;SACJ;QACDiB,QAAQ,EAAA,sKAAA;MAIZ,CAAC,EAAC;;;;;;;;"}