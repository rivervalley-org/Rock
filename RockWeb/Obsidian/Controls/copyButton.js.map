{"version":3,"file":"copyButton.js","sources":["../../../Framework/Controls/copyButton.ts"],"sourcesContent":["// <copyright>\r\n// Copyright by the Spark Development Network\r\n//\r\n// Licensed under the Rock Community License (the \"License\");\r\n// you may not use this file except in compliance with the License.\r\n// You may obtain a copy of the License at\r\n//\r\n// http://www.rockrms.com/license\r\n//\r\n// Unless required by applicable law or agreed to in writing, software\r\n// distributed under the License is distributed on an \"AS IS\" BASIS,\r\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n// See the License for the specific language governing permissions and\r\n// limitations under the License.\r\n// </copyright>\r\n//\r\n\r\nimport { Component, ComponentPublicInstance, defineComponent, nextTick, onMounted, PropType, ref, unref, watch } from \"vue\";\r\nimport RockButton from \"./rockButton\";\r\n\r\nexport default defineComponent({\r\n    name: \"CopyButton\",\r\n\r\n    components: {\r\n        RockButton\r\n    },\r\n\r\n    props: {\r\n        value: {\r\n            type: String as PropType<string>,\r\n            required: true\r\n        },\r\n        tooltip: {\r\n            type: String as PropType<string>,\r\n            default: \"Copy\"\r\n        },\r\n        /**\r\n         * The direction from the button that the tooltip pops up on. NOTE: This is not reactive.\r\n         * If it is changed after initialized, the tooltip will still show up wherever you\r\n         * originally told it to show up.\r\n         */\r\n        tooltipPlacement: {\r\n            type: String as PropType<\"auto\" | \"top\" | \"right\" | \"bottom\" | \"left\">,\r\n            default: \"auto\"\r\n        }\r\n    },\r\n\r\n    setup(props) {\r\n        const el = ref<ComponentPublicInstance | null>(null);\r\n        let jEl;\r\n\r\n        function copy(e: MouseEvent): void {\r\n            e.preventDefault();\r\n            navigator.clipboard.writeText(props.value);\r\n\r\n            jEl.attr(\"data-original-title\", \"Copied\")\r\n                .tooltip(\"show\")\r\n                .attr(\"data-original-title\", props.tooltip);\r\n\r\n        }\r\n\r\n        onMounted(() => {\r\n            if (!el.value) {\r\n                return;\r\n            }\r\n\r\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n            const jquery = <any>window[<any>\"$\"];\r\n            jEl = jquery(el.value?.$el).tooltip();\r\n        });\r\n\r\n        return {\r\n            el,\r\n            copy\r\n        };\r\n    },\r\n\r\n    template: `\r\n<RockButton\r\n    class=\"btn-copy-to-clipboard\"\r\n    :onClick=\"copy\"\r\n    data-toggle=\"tooltip\"\r\n    :data-placement=\"tooltipPlacement\"\r\n    data-container=\"body\"\r\n    :data-original-title=\"tooltip\"\r\n    ref=\"el\"\r\n><i class=\"fa fa-clipboard\"></i></RockButton>\r\n`\r\n});"],"names":["defineComponent","name","components","RockButton","props","value","type","String","required","tooltip","default","tooltipPlacement","setup","el","ref","jEl","copy","e","preventDefault","navigator","clipboard","writeText","attr","onMounted","_el$value","jquery","window","$el","template"],"mappings":";;;;;;;;;;;;;AAoBA,gDAAeA,eAAe,CAAC;YAC3BC,EAAAA,IAAI,EAAE,YAAY;YAElBC,EAAAA,UAAU,EAAE;YACRC,IAAAA,UAAAA;eACH;YAEDC,EAAAA,KAAK,EAAE;YACHC,IAAAA,KAAK,EAAE;YACHC,MAAAA,IAAI,EAAEC,MAA0B;YAChCC,MAAAA,QAAQ,EAAE,IAAA;iBACb;YACDC,IAAAA,OAAO,EAAE;YACLH,MAAAA,IAAI,EAAEC,MAA0B;YAChCG,MAAAA,OAAO,EAAE,MAAA;iBACZ;YAMDC,IAAAA,gBAAgB,EAAE;YACdL,MAAAA,IAAI,EAAEC,MAAgE;YACtEG,MAAAA,OAAO,EAAE,MAAA;YACb,KAAA;eACH;cAEDE,KAAKA,CAACR,KAAK,EAAE;YACT,IAAA,IAAMS,EAAE,GAAGC,GAAG,CAAiC,IAAI,CAAC,CAAA;YACpD,IAAA,IAAIC,GAAG,CAAA;gBAEP,SAASC,IAAIA,CAACC,CAAa,EAAQ;kBAC/BA,CAAC,CAACC,cAAc,EAAE,CAAA;kBAClBC,SAAS,CAACC,SAAS,CAACC,SAAS,CAACjB,KAAK,CAACC,KAAK,CAAC,CAAA;kBAE1CU,GAAG,CAACO,IAAI,CAAC,qBAAqB,EAAE,QAAQ,CAAC,CACpCb,OAAO,CAAC,MAAM,CAAC,CACfa,IAAI,CAAC,qBAAqB,EAAElB,KAAK,CAACK,OAAO,CAAC,CAAA;YAEnD,KAAA;YAEAc,IAAAA,SAAS,CAAC,MAAM;YAAA,MAAA,IAAAC,SAAA,CAAA;YACZ,MAAA,IAAI,CAACX,EAAE,CAACR,KAAK,EAAE;YACX,QAAA,OAAA;YACJ,OAAA;YAGA,MAAA,IAAMoB,MAAM,GAAQC,MAAM,CAAM,GAAG,CAAC,CAAA;YACpCX,MAAAA,GAAG,GAAGU,MAAM,CAAA,CAAAD,SAAA,GAACX,EAAE,CAACR,KAAK,MAAAmB,IAAAA,IAAAA,SAAA,uBAARA,SAAA,CAAUG,GAAG,CAAC,CAAClB,OAAO,EAAE,CAAA;YACzC,KAAC,CAAC,CAAA;gBAEF,OAAO;kBACHI,EAAE;YACFG,MAAAA,IAAAA;iBACH,CAAA;eACJ;cAEDY,QAAQ,EAAA,wRAAA;YAWZ,CAAC,EAAC;;;;;;;;"}