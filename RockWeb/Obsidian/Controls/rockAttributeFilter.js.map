{"version":3,"file":"rockAttributeFilter.js","sources":["../../../Framework/Controls/rockAttributeFilter.ts"],"sourcesContent":["// <copyright>\r\n// Copyright by the Spark Development Network\r\n//\r\n// Licensed under the Rock Community License (the \"License\");\r\n// you may not use this file except in compliance with the License.\r\n// You may obtain a copy of the License at\r\n//\r\n// http://www.rockrms.com/license\r\n//\r\n// Unless required by applicable law or agreed to in writing, software\r\n// distributed under the License is distributed on an \"AS IS\" BASIS,\r\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n// See the License for the specific language governing permissions and\r\n// limitations under the License.\r\n// </copyright>\r\n//\r\nimport { computed, defineComponent, PropType } from \"vue\";\r\nimport { getFieldType } from \"@Obsidian/Utility/fieldTypes\";\r\nimport { ComparisonValue } from \"@Obsidian/Types/Reporting/comparisonValue\";\r\nimport { FilterMode } from \"@Obsidian/Core/Reporting/filterMode\";\r\nimport { useVModelPassthrough } from \"@Obsidian/Utility/component\";\r\nimport { PublicAttributeBag } from \"@Obsidian/ViewModels/Utility/publicAttributeBag\";\r\n\r\nexport default defineComponent({\r\n    name: \"RockAttributeFilter\",\r\n\r\n    props: {\r\n        modelValue: {\r\n            type: Object as PropType<ComparisonValue>,\r\n            default: { value: \"\" }\r\n        },\r\n        attribute: {\r\n            type: Object as PropType<PublicAttributeBag>,\r\n            required: true\r\n        },\r\n        required: {\r\n            type: Boolean as PropType<boolean>,\r\n            default: false\r\n        },\r\n        filterMode: {\r\n            type: Number as PropType<FilterMode>,\r\n            default: FilterMode.Simple\r\n        }\r\n    },\r\n\r\n    emits: [\r\n        \"update:modelValue\"\r\n    ],\r\n\r\n    setup(props, { emit }) {\r\n        /** The internal value used by the filter component. */\r\n        const internalValue = useVModelPassthrough(props, \"modelValue\", emit);\r\n\r\n        /** The field type instance being edited. */\r\n        const field = computed(() => {\r\n            return getFieldType(props.attribute.fieldTypeGuid ?? \"\");\r\n        });\r\n\r\n        /** The filter component to use to display and edit the value. */\r\n        const filterComponent = computed(() => field.value?.getFilterComponent());\r\n\r\n        /** The configuration values for the editor component. */\r\n        const configurationValues = computed(() => props.attribute.configurationValues ?? {});\r\n\r\n        return {\r\n            configurationValues,\r\n            filterComponent,\r\n            internalValue\r\n        };\r\n    },\r\n    template: `\r\n<component :is=\"filterComponent\"\r\n    v-model=\"internalValue\"\r\n    :configurationValues=\"configurationValues\"\r\n    :required=\"required\"\r\n    :filterMode=\"filterMode\" />\r\n`\r\n});\r\n"],"names":["defineComponent","name","props","modelValue","type","Object","default","value","attribute","required","Boolean","filterMode","Number","FilterMode","Simple","emits","setup","_ref","emit","internalValue","useVModelPassthrough","field","computed","_props$attribute$fiel","getFieldType","fieldTypeGuid","filterComponent","_field$value","getFilterComponent","configurationValues","_props$attribute$conf","template"],"mappings":";;;;;;;;;;;;;;;;AAuBA,yDAAeA,eAAe,CAAC;YAC3BC,EAAAA,IAAI,EAAE,qBAAqB;YAE3BC,EAAAA,KAAK,EAAE;YACHC,IAAAA,UAAU,EAAE;YACRC,MAAAA,IAAI,EAAEC,MAAmC;YACzCC,MAAAA,OAAO,EAAE;YAAEC,QAAAA,KAAK,EAAE,EAAA;YAAG,OAAA;iBACxB;YACDC,IAAAA,SAAS,EAAE;YACPJ,MAAAA,IAAI,EAAEC,MAAsC;YAC5CI,MAAAA,QAAQ,EAAE,IAAA;iBACb;YACDA,IAAAA,QAAQ,EAAE;YACNL,MAAAA,IAAI,EAAEM,OAA4B;YAClCJ,MAAAA,OAAO,EAAE,KAAA;iBACZ;YACDK,IAAAA,UAAU,EAAE;YACRP,MAAAA,IAAI,EAAEQ,MAA8B;kBACpCN,OAAO,EAAEO,UAAU,CAACC,MAAAA;YACxB,KAAA;eACH;cAEDC,KAAK,EAAE,CACH,mBAAmB,CACtB;YAEDC,EAAAA,KAAKA,CAACd,KAAK,EAAAe,IAAA,EAAY;YAAA,IAAA,IAARC,IAAI,GAAAD,IAAA,CAAJC,IAAI,CAAA;gBAEf,IAAMC,aAAa,GAAGC,oBAAoB,CAAClB,KAAK,EAAE,YAAY,EAAEgB,IAAI,CAAC,CAAA;YAGrE,IAAA,IAAMG,KAAK,GAAGC,QAAQ,CAAC,MAAM;YAAA,MAAA,IAAAC,qBAAA,CAAA;YACzB,MAAA,OAAOC,YAAY,CAAA,CAAAD,qBAAA,GAACrB,KAAK,CAACM,SAAS,CAACiB,aAAa,cAAAF,qBAAA,KAAA,KAAA,CAAA,GAAAA,qBAAA,GAAI,EAAE,CAAC,CAAA;YAC5D,KAAC,CAAC,CAAA;gBAGF,IAAMG,eAAe,GAAGJ,QAAQ,CAAC,MAAA;YAAA,MAAA,IAAAK,YAAA,CAAA;kBAAA,OAAAA,CAAAA,YAAA,GAAMN,KAAK,CAACd,KAAK,MAAAoB,IAAAA,IAAAA,YAAA,KAAXA,KAAAA,CAAAA,GAAAA,KAAAA,CAAAA,GAAAA,YAAA,CAAaC,kBAAkB,EAAE,CAAA;iBAAC,CAAA,CAAA;gBAGzE,IAAMC,mBAAmB,GAAGP,QAAQ,CAAC,MAAA;YAAA,MAAA,IAAAQ,qBAAA,CAAA;YAAA,MAAA,OAAA,CAAAA,qBAAA,GAAM5B,KAAK,CAACM,SAAS,CAACqB,mBAAmB,MAAA,IAAA,IAAAC,qBAAA,KAAA,KAAA,CAAA,GAAAA,qBAAA,GAAI,EAAE,CAAA;iBAAC,CAAA,CAAA;gBAErF,OAAO;kBACHD,mBAAmB;kBACnBH,eAAe;YACfP,MAAAA,aAAAA;iBACH,CAAA;eACJ;cACDY,QAAQ,EAAA,wLAAA;YAOZ,CAAC,EAAC;;;;;;;;"}