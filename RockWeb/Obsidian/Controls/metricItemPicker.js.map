{"version":3,"file":"metricItemPicker.js","sources":["../../../Framework/Controls/metricItemPicker.ts"],"sourcesContent":["// <copyright>\r\n// Copyright by the Spark Development Network\r\n//\r\n// Licensed under the Rock Community License (the \"License\");\r\n// you may not use this file except in compliance with the License.\r\n// You may obtain a copy of the License at\r\n//\r\n// http://www.rockrms.com/license\r\n//\r\n// Unless required by applicable law or agreed to in writing, software\r\n// distributed under the License is distributed on an \"AS IS\" BASIS,\r\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n// See the License for the specific language governing permissions and\r\n// limitations under the License.\r\n// </copyright>\r\n//\r\n\r\nimport { defineComponent, PropType, ref, watch } from \"vue\";\r\nimport { MetricItemTreeItemProvider } from \"@Obsidian/Utility/treeItemProviders\";\r\nimport { updateRefValue } from \"@Obsidian/Utility/component\";\r\nimport { ListItemBag } from \"@Obsidian/ViewModels/Utility/listItemBag\";\r\nimport { Guid } from \"@Obsidian/Types\";\r\nimport TreeItemPicker from \"./treeItemPicker.obs\";\r\n\r\nexport default defineComponent({\r\n    name: \"MetricItemPicker\",\r\n\r\n    components: {\r\n        TreeItemPicker\r\n    },\r\n\r\n    props: {\r\n        modelValue: {\r\n            type: Object as PropType<ListItemBag | ListItemBag[] | null>,\r\n            required: false\r\n        },\r\n\r\n        multiple: {\r\n            type: Boolean as PropType<boolean>,\r\n            default: false\r\n        },\r\n\r\n        securityGrantToken: {\r\n            type: String as PropType<string | null>,\r\n            default: null\r\n        },\r\n\r\n        includeCategoryGuids: {\r\n            type: Array as PropType<Guid[] | null>,\r\n            default: null\r\n        },\r\n    },\r\n\r\n    emits: {\r\n        \"update:modelValue\": (_value: ListItemBag | ListItemBag[] | null) => true\r\n    },\r\n\r\n    setup(props, { emit }) {\r\n        const internalValue = ref(props.modelValue ?? null);\r\n\r\n        // Configure the item provider with our settings. These are not reactive\r\n        // since we don't do lazy loading so there is no point.\r\n        const itemProvider = new MetricItemTreeItemProvider();\r\n        itemProvider.securityGrantToken = props.securityGrantToken;\r\n        itemProvider.includeCategoryGuids = props.includeCategoryGuids;\r\n\r\n        watch(internalValue, () => {\r\n            emit(\"update:modelValue\", internalValue.value);\r\n        });\r\n\r\n        watch(() => props.modelValue, () => {\r\n            updateRefValue(internalValue, props.modelValue ?? null);\r\n        });\r\n\r\n        return {\r\n            internalValue,\r\n            itemProvider\r\n        };\r\n    },\r\n\r\n    template: `\r\n<TreeItemPicker v-model=\"internalValue\"\r\n    formGroupClasses=\"location-item-picker\"\r\n    iconCssClass=\"fa fa-bar-chart-o\"\r\n    :provider=\"itemProvider\"\r\n    :multiple=\"multiple\"\r\n    disableFolderSelection\r\n/>\r\n`\r\n});\r\n"],"names":["defineComponent","name","components","TreeItemPicker","props","modelValue","type","Object","required","multiple","Boolean","default","securityGrantToken","String","includeCategoryGuids","Array","emits","_value","setup","_ref","_props$modelValue","emit","internalValue","ref","itemProvider","MetricItemTreeItemProvider","watch","value","_props$modelValue2","updateRefValue","template"],"mappings":";;;;;;;;;;;;;;;;;AAwBA,sDAAeA,eAAe,CAAC;YAC3BC,EAAAA,IAAI,EAAE,kBAAkB;YAExBC,EAAAA,UAAU,EAAE;YACRC,IAAAA,cAAAA;eACH;YAEDC,EAAAA,KAAK,EAAE;YACHC,IAAAA,UAAU,EAAE;YACRC,MAAAA,IAAI,EAAEC,MAAsD;YAC5DC,MAAAA,QAAQ,EAAE,KAAA;iBACb;YAEDC,IAAAA,QAAQ,EAAE;YACNH,MAAAA,IAAI,EAAEI,OAA4B;YAClCC,MAAAA,OAAO,EAAE,KAAA;iBACZ;YAEDC,IAAAA,kBAAkB,EAAE;YAChBN,MAAAA,IAAI,EAAEO,MAAiC;YACvCF,MAAAA,OAAO,EAAE,IAAA;iBACZ;YAEDG,IAAAA,oBAAoB,EAAE;YAClBR,MAAAA,IAAI,EAAES,KAAgC;YACtCJ,MAAAA,OAAO,EAAE,IAAA;YACb,KAAA;eACH;YAEDK,EAAAA,KAAK,EAAE;gBACH,mBAAmB,EAAGC,MAA0C,IAAK,IAAA;eACxE;YAEDC,EAAAA,KAAKA,CAACd,KAAK,EAAAe,IAAA,EAAY;YAAA,IAAA,IAAAC,iBAAA,CAAA;YAAA,IAAA,IAARC,IAAI,GAAAF,IAAA,CAAJE,IAAI,CAAA;YACf,IAAA,IAAMC,aAAa,GAAGC,GAAG,CAAA,CAAAH,iBAAA,GAAChB,KAAK,CAACC,UAAU,cAAAe,iBAAA,KAAA,KAAA,CAAA,GAAAA,iBAAA,GAAI,IAAI,CAAC,CAAA;YAInD,IAAA,IAAMI,YAAY,GAAG,IAAIC,0BAA0B,EAAE,CAAA;YACrDD,IAAAA,YAAY,CAACZ,kBAAkB,GAAGR,KAAK,CAACQ,kBAAkB,CAAA;YAC1DY,IAAAA,YAAY,CAACV,oBAAoB,GAAGV,KAAK,CAACU,oBAAoB,CAAA;gBAE9DY,KAAK,CAACJ,aAAa,EAAE,MAAM;YACvBD,MAAAA,IAAI,CAAC,mBAAmB,EAAEC,aAAa,CAACK,KAAK,CAAC,CAAA;YAClD,KAAC,CAAC,CAAA;YAEFD,IAAAA,KAAK,CAAC,MAAMtB,KAAK,CAACC,UAAU,EAAE,MAAM;YAAA,MAAA,IAAAuB,kBAAA,CAAA;YAChCC,MAAAA,cAAc,CAACP,aAAa,EAAAM,CAAAA,kBAAA,GAAExB,KAAK,CAACC,UAAU,MAAA,IAAA,IAAAuB,kBAAA,KAAA,KAAA,CAAA,GAAAA,kBAAA,GAAI,IAAI,CAAC,CAAA;YAC3D,KAAC,CAAC,CAAA;gBAEF,OAAO;kBACHN,aAAa;YACbE,MAAAA,YAAAA;iBACH,CAAA;eACJ;cAEDM,QAAQ,EAAA,kOAAA;YASZ,CAAC,EAAC;;;;;;;;"}