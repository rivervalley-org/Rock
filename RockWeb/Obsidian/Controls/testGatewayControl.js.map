{"version":3,"file":"testGatewayControl.js","sources":["../../../Framework/Controls/testGatewayControl.ts"],"sourcesContent":["ï»¿// <copyright>\r\n// Copyright by the Spark Development Network\r\n//\r\n// Licensed under the Rock Community License (the \"License\");\r\n// you may not use this file except in compliance with the License.\r\n// You may obtain a copy of the License at\r\n//\r\n// http://www.rockrms.com/license\r\n//\r\n// Unless required by applicable law or agreed to in writing, software\r\n// distributed under the License is distributed on an \"AS IS\" BASIS,\r\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n// See the License for the specific language governing permissions and\r\n// limitations under the License.\r\n// </copyright>\r\n//\r\nimport { defineComponent, PropType, ref } from \"vue\";\r\nimport LoadingIndicator from \"./loadingIndicator\";\r\nimport TextBox from \"./textBox\";\r\nimport { newGuid } from \"@Obsidian/Utility/guid\";\r\nimport { onSubmitPayment } from \"@Obsidian/Core/Controls/financialGateway\";\r\nimport { GatewayEmitStrings } from \"@Obsidian/Enums/Controls/gatewayEmitStrings\";\r\n\r\ntype Settings = {\r\n};\r\n\r\nexport default defineComponent({\r\n    name: \"TestGatewayControl\",\r\n    components: {\r\n        LoadingIndicator,\r\n        TextBox\r\n    },\r\n    props: {\r\n        settings: {\r\n            type: Object as PropType<Settings>,\r\n            required: true\r\n        },\r\n        submit: {\r\n            type: Boolean as PropType<boolean>,\r\n            required: true\r\n        }\r\n    },\r\n\r\n    setup(props, { emit }) {\r\n        const cardNumber = ref(\"\");\r\n\r\n        const submit = async (): Promise<void> => {\r\n            // Simulate an AJAX call delay\r\n            await new Promise(resolve => setTimeout(resolve, 500));\r\n\r\n            // Throw an error for a '0000'\r\n            if (cardNumber.value === \"0000\") {\r\n                emit(GatewayEmitStrings.Error, \"This is a serious problem with the gateway.\");\r\n                return;\r\n            }\r\n\r\n            // Validate the card number is greater than 10 digits\r\n            if (cardNumber.value.length <= 10) {\r\n                emit(GatewayEmitStrings.Validation, {\r\n                    \"Card Number\": \"Card number is invalid.\"\r\n                });\r\n                return;\r\n            }\r\n\r\n            const token = newGuid().replace(/-/g, \"\");\r\n            emit(GatewayEmitStrings.Success, token);\r\n        };\r\n\r\n        onSubmitPayment(submit);\r\n\r\n        return {\r\n            cardNumber\r\n        };\r\n    },\r\n\r\n    template: `\r\n<div style=\"max-width: 600px; margin-left: auto; margin-right: auto;\">\r\n    <TextBox label=\"Credit Card\" v-model=\"cardNumber\" />\r\n</div>`\r\n});\r\n"],"names":["defineComponent","name","components","LoadingIndicator","TextBox","props","settings","type","Object","required","submit","Boolean","setup","_ref","emit","cardNumber","ref","_ref2","_asyncToGenerator","Promise","resolve","setTimeout","value","GatewayEmitStrings","Error","length","Validation","token","newGuid","replace","Success","apply","arguments","onSubmitPayment","template"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0BA,kDAAeA,eAAe,CAAC;MAC3BC,EAAAA,IAAI,EAAE,oBAAoB;MAC1BC,EAAAA,UAAU,EAAE;UACRC,gBAAgB;MAChBC,IAAAA,OAAAA;SACH;MACDC,EAAAA,KAAK,EAAE;MACHC,IAAAA,QAAQ,EAAE;MACNC,MAAAA,IAAI,EAAEC,MAA4B;MAClCC,MAAAA,QAAQ,EAAE,IAAA;WACb;MACDC,IAAAA,MAAM,EAAE;MACJH,MAAAA,IAAI,EAAEI,OAA4B;MAClCF,MAAAA,QAAQ,EAAE,IAAA;MACd,KAAA;SACH;MAEDG,EAAAA,KAAKA,CAACP,KAAK,EAAAQ,IAAA,EAAY;MAAA,IAAA,IAARC,IAAI,GAAAD,IAAA,CAAJC,IAAI,CAAA;MACf,IAAA,IAAMC,UAAU,GAAGC,GAAG,CAAC,EAAE,CAAC,CAAA;MAE1B,IAAA,IAAMN,MAAM,GAAA,YAAA;MAAA,MAAA,IAAAO,KAAA,GAAAC,iBAAA,CAAG,aAA2B;cAEtC,MAAM,IAAIC,OAAO,CAACC,OAAO,IAAIC,UAAU,CAACD,OAAO,EAAE,GAAG,CAAC,CAAC,CAAA;MAGtD,QAAA,IAAIL,UAAU,CAACO,KAAK,KAAK,MAAM,EAAE;MAC7BR,UAAAA,IAAI,CAACS,kBAAkB,CAACC,KAAK,EAAE,6CAA6C,CAAC,CAAA;MAC7E,UAAA,OAAA;MACJ,SAAA;MAGA,QAAA,IAAIT,UAAU,CAACO,KAAK,CAACG,MAAM,IAAI,EAAE,EAAE;MAC/BX,UAAAA,IAAI,CAACS,kBAAkB,CAACG,UAAU,EAAE;MAChC,YAAA,aAAa,EAAE,yBAAA;MACnB,WAAC,CAAC,CAAA;MACF,UAAA,OAAA;MACJ,SAAA;cAEA,IAAMC,KAAK,GAAGC,OAAO,EAAE,CAACC,OAAO,CAAC,IAAI,EAAE,EAAE,CAAC,CAAA;MACzCf,QAAAA,IAAI,CAACS,kBAAkB,CAACO,OAAO,EAAEH,KAAK,CAAC,CAAA;aAC1C,CAAA,CAAA;MAAA,MAAA,OAAA,SApBKjB,MAAMA,GAAA;MAAA,QAAA,OAAAO,KAAA,CAAAc,KAAA,CAAA,IAAA,EAAAC,SAAA,CAAA,CAAA;MAAA,OAAA,CAAA;WAoBX,EAAA,CAAA;UAEDC,eAAe,CAACvB,MAAM,CAAC,CAAA;UAEvB,OAAO;MACHK,MAAAA,UAAAA;WACH,CAAA;SACJ;QAEDmB,QAAQ,EAAA,kJAAA;MAIZ,CAAC,EAAC;;;;;;;;"}