{"version":3,"file":"textBox.js","sources":["../../../Framework/Controls/textBox.ts"],"sourcesContent":["ï»¿// <copyright>\r\n// Copyright by the Spark Development Network\r\n//\r\n// Licensed under the Rock Community License (the \"License\");\r\n// you may not use this file except in compliance with the License.\r\n// You may obtain a copy of the License at\r\n//\r\n// http://www.rockrms.com/license\r\n//\r\n// Unless required by applicable law or agreed to in writing, software\r\n// distributed under the License is distributed on an \"AS IS\" BASIS,\r\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n// See the License for the specific language governing permissions and\r\n// limitations under the License.\r\n// </copyright>\r\n//\r\nimport { computed } from \"vue\";\r\nimport { defineComponent, PropType } from \"vue\";\r\nimport { useVModelPassthrough } from \"@Obsidian/Utility/component\";\r\nimport RockFormField from \"./rockFormField\";\r\n\r\nexport default defineComponent({\r\n    name: \"TextBox\",\r\n    components: {\r\n        RockFormField\r\n    },\r\n    props: {\r\n        modelValue: {\r\n            type: String as PropType<string>,\r\n            required: true\r\n        },\r\n        type: {\r\n            type: String as PropType<string>,\r\n            default: \"text\"\r\n        },\r\n        maxLength: {\r\n            type: Number as PropType<number>,\r\n            default: 524288\r\n        },\r\n        showCountDown: {\r\n            type: Boolean as PropType<boolean>,\r\n            default: false\r\n        },\r\n        placeholder: {\r\n            type: String as PropType<string>,\r\n            default: \"\"\r\n        },\r\n        inputClasses: {\r\n            type: String as PropType<string>,\r\n            default: \"\"\r\n        },\r\n        formGroupClasses: {\r\n            type: String as PropType<string>,\r\n            default: \"\"\r\n        },\r\n        rows: {\r\n            type: Number as PropType<number>,\r\n            default: 3\r\n        },\r\n        textMode: {\r\n            type: String as PropType<string>,\r\n            default: \"\"\r\n        }\r\n    },\r\n    emits: [\r\n        \"update:modelValue\"\r\n    ],\r\n    setup(props, ctx) {\r\n        const internalValue = useVModelPassthrough(props, \"modelValue\", ctx.emit);\r\n\r\n        const isTextarea = computed((): boolean => {\r\n            return props.textMode?.toLowerCase() === \"multiline\";\r\n        });\r\n\r\n        const charsRemaining = computed((): number => {\r\n            return props.maxLength - internalValue.value.length;\r\n        });\r\n\r\n        const countdownClass = computed((): string => {\r\n            if (charsRemaining.value >= 10) {\r\n                return \"badge-default\";\r\n            }\r\n\r\n            if (charsRemaining.value >= 0) {\r\n                return \"badge-warning\";\r\n            }\r\n\r\n            return \"badge-danger\";\r\n        });\r\n\r\n        const isInputGroup = computed((): boolean => {\r\n            return !!ctx.slots.inputGroupPrepend || !!ctx.slots.inputGroupAppend;\r\n        });\r\n\r\n        const controlContainerClass = computed((): string => {\r\n            return isInputGroup.value ? \"input-group\" : \"\";\r\n        });\r\n\r\n        return {\r\n            controlContainerClass,\r\n            internalValue,\r\n            isTextarea,\r\n            charsRemaining,\r\n            countdownClass\r\n        };\r\n    },\r\n    template: `\r\n<RockFormField\r\n    v-model=\"internalValue\"\r\n    :formGroupClasses=\"'rock-text-box ' + formGroupClasses\"\r\n    name=\"textbox\">\r\n    <template #pre>\r\n        <em v-if=\"showCountDown\" class=\"pull-right badge\" :class=\"countdownClass\">\r\n            {{charsRemaining}}\r\n        </em>\r\n    </template>\r\n    <template #default=\"{uniqueId, field}\">\r\n        <div class=\"control-wrapper\">\r\n            <slot name=\"prepend\" :isInputGroupSupported=\"true\" />\r\n            <div :class=\"controlContainerClass\">\r\n                <slot name=\"inputGroupPrepend\" :isInputGroupSupported=\"true\" />\r\n                <textarea v-if=\"isTextarea\" v-model=\"internalValue\" :rows=\"rows\" cols=\"20\" :maxlength=\"maxLength\" :id=\"uniqueId\" class=\"form-control\" v-bind=\"field\"></textarea>\r\n                <input v-else v-model=\"internalValue\" :id=\"uniqueId\" :type=\"type\" class=\"form-control\" :class=\"inputClasses\" v-bind=\"field\" :maxlength=\"maxLength\" :placeholder=\"placeholder\" />\r\n                <slot name=\"inputGroupAppend\" :isInputGroupSupported=\"true\" />\r\n            </div>\r\n            <slot name=\"append\" :isInputGroupSupported=\"true\" />\r\n        </div>\r\n    </template>\r\n</RockFormField>`\r\n});\r\n"],"names":["defineComponent","name","components","RockFormField","props","modelValue","type","String","required","default","maxLength","Number","showCountDown","Boolean","placeholder","inputClasses","formGroupClasses","rows","textMode","emits","setup","ctx","internalValue","useVModelPassthrough","emit","isTextarea","computed","_props$textMode","toLowerCase","charsRemaining","value","length","countdownClass","isInputGroup","slots","inputGroupPrepend","inputGroupAppend","controlContainerClass","template"],"mappings":"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"}