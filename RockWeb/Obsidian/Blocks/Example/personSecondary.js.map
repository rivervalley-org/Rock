{"version":3,"file":"personSecondary.js","sources":["../../src/Example/personSecondary.ts"],"sourcesContent":["ï»¿// <copyright>\r\n// Copyright by the Spark Development Network\r\n//\r\n// Licensed under the Rock Community License (the \"License\");\r\n// you may not use this file except in compliance with the License.\r\n// You may obtain a copy of the License at\r\n//\r\n// http://www.rockrms.com/license\r\n//\r\n// Unless required by applicable law or agreed to in writing, software\r\n// distributed under the License is distributed on an \"AS IS\" BASIS,\r\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n// See the License for the specific language governing permissions and\r\n// limitations under the License.\r\n// </copyright>\r\n//\r\nimport bus from \"@Obsidian/Utility/bus\";\r\nimport Block from \"@Obsidian/Templates/block\";\r\nimport SecondaryBlock from \"@Obsidian/Controls/secondaryBlock\";\r\nimport RockButton from \"@Obsidian/Controls/rockButton\";\r\nimport TextBox from \"@Obsidian/Controls/textBox\";\r\nimport { defineComponent } from \"vue\";\r\nimport { useStore } from \"@Obsidian/PageState\";\r\nimport { PersonBag } from \"@Obsidian/ViewModels/Entities/personBag\";\r\n\r\nconst store = useStore();\r\n\r\nexport default defineComponent({\r\n    name: \"Example.PersonSecondary\",\r\n    components: {\r\n        Block,\r\n        SecondaryBlock,\r\n        TextBox,\r\n        RockButton\r\n    },\r\n    data() {\r\n        return {\r\n            messageToPublish: \"\",\r\n            receivedMessage: \"\"\r\n        };\r\n    },\r\n    methods: {\r\n        receiveMessage(message: string): void {\r\n            this.receivedMessage = message;\r\n        },\r\n        doPublish(): void {\r\n            bus.publish(\"PersonSecondary:Message\", this.messageToPublish);\r\n            this.messageToPublish = \"\";\r\n\r\n        },\r\n        doThrowError(): void {\r\n            throw new Error(\"This is an uncaught error\");\r\n        }\r\n    },\r\n    computed: {\r\n        currentPerson(): PersonBag | null {\r\n            return store.state.currentPerson;\r\n        },\r\n        currentPersonName(): string {\r\n            return this.currentPerson?.fullName || \"anonymous\";\r\n        },\r\n        imageUrl(): string {\r\n            return this.currentPerson?.photoUrl || \"/Assets/Images/person-no-photo-unknown.svg\";\r\n        },\r\n        photoElementStyle(): string {\r\n            return `background-image: url(\"${this.imageUrl}\"); background-size: cover; background-repeat: no-repeat;`;\r\n        }\r\n    },\r\n    created() {\r\n        bus.subscribe<string>(\"PersonDetail:Message\", this.receiveMessage);\r\n    },\r\n    template:\r\n`<SecondaryBlock>\r\n    <Block title=\"Secondary Block\">\r\n        <template #default>\r\n            <div class=\"row\">\r\n                <div class=\"col-sm-6\">\r\n                    <p>\r\n                        Hi, {{currentPersonName}}!\r\n                        <div class=\"photo-icon photo-round photo-round-sm\" :style=\"photoElementStyle\"></div>\r\n                    </p>\r\n                    <p>This is a secondary block. It respects the store's value indicating if secondary blocks are visible.</p>\r\n                    <RockButton btnType=\"danger\" btnSize=\"sm\" @click=\"doThrowError\">Throw Error</RockButton>\r\n                </div>\r\n                <div class=\"col-sm-6\">\r\n                    <div class=\"well\">\r\n                        <TextBox label=\"Message\" v-model=\"messageToPublish\" />\r\n                        <RockButton btnType=\"primary\" btnSize=\"sm\" @click=\"doPublish\">Publish</RockButton>\r\n                    </div>\r\n                    <p>\r\n                        <strong>Detail block says:</strong>\r\n                        {{receivedMessage}}\r\n                    </p>\r\n                </div>\r\n            </div>\r\n        </template>\r\n    </Block>\r\n</SecondaryBlock>`\r\n});\r\n"],"names":["store","useStore","defineComponent","name","components","Block","SecondaryBlock","TextBox","RockButton","data","messageToPublish","receivedMessage","methods","receiveMessage","message","doPublish","bus","publish","doThrowError","Error","computed","currentPerson","state","currentPersonName","_this$currentPerson","fullName","imageUrl","_this$currentPerson2","photoUrl","photoElementStyle","concat","created","subscribe","template"],"mappings":";;;;;;;;;;;;;;;;;;;;;YAyBA,IAAMA,KAAK,GAAGC,QAAQ,EAAE,CAAA;AAExB,qDAAeC,eAAe,CAAC;YAC3BC,EAAAA,IAAI,EAAE,yBAAyB;YAC/BC,EAAAA,UAAU,EAAE;gBACRC,KAAK;gBACLC,cAAc;gBACdC,OAAO;YACPC,IAAAA,UAAAA;eACH;YACDC,EAAAA,IAAIA,GAAG;gBACH,OAAO;YACHC,MAAAA,gBAAgB,EAAE,EAAE;YACpBC,MAAAA,eAAe,EAAE,EAAA;iBACpB,CAAA;eACJ;YACDC,EAAAA,OAAO,EAAE;gBACLC,cAAcA,CAACC,OAAe,EAAQ;kBAClC,IAAI,CAACH,eAAe,GAAGG,OAAO,CAAA;iBACjC;YACDC,IAAAA,SAASA,GAAS;kBACdC,GAAG,CAACC,OAAO,CAAC,yBAAyB,EAAE,IAAI,CAACP,gBAAgB,CAAC,CAAA;kBAC7D,IAAI,CAACA,gBAAgB,GAAG,EAAE,CAAA;iBAE7B;YACDQ,IAAAA,YAAYA,GAAS;YACjB,MAAA,MAAM,IAAIC,KAAK,CAAC,2BAA2B,CAAC,CAAA;YAChD,KAAA;eACH;YACDC,EAAAA,QAAQ,EAAE;YACNC,IAAAA,aAAaA,GAAqB;YAC9B,MAAA,OAAOrB,KAAK,CAACsB,KAAK,CAACD,aAAa,CAAA;iBACnC;YACDE,IAAAA,iBAAiBA,GAAW;YAAA,MAAA,IAAAC,mBAAA,CAAA;YACxB,MAAA,OAAO,CAAAA,CAAAA,mBAAA,GAAI,IAAA,CAACH,aAAa,MAAA,IAAA,IAAAG,mBAAA,KAAA,KAAA,CAAA,GAAA,KAAA,CAAA,GAAlBA,mBAAA,CAAoBC,QAAQ,KAAI,WAAW,CAAA;iBACrD;YACDC,IAAAA,QAAQA,GAAW;YAAA,MAAA,IAAAC,oBAAA,CAAA;YACf,MAAA,OAAO,CAAAA,CAAAA,oBAAA,GAAI,IAAA,CAACN,aAAa,MAAA,IAAA,IAAAM,oBAAA,KAAA,KAAA,CAAA,GAAA,KAAA,CAAA,GAAlBA,oBAAA,CAAoBC,QAAQ,KAAI,4CAA4C,CAAA;iBACtF;YACDC,IAAAA,iBAAiBA,GAAW;YACxB,MAAA,OAAA,0BAAA,CAAAC,MAAA,CAAiC,IAAI,CAACJ,QAAQ,EAAA,4DAAA,CAAA,CAAA;YAClD,KAAA;eACH;YACDK,EAAAA,OAAOA,GAAG;gBACNf,GAAG,CAACgB,SAAS,CAAS,sBAAsB,EAAE,IAAI,CAACnB,cAAc,CAAC,CAAA;eACrE;cACDoB,QAAQ,EAAA,4rCAAA;YA2BZ,CAAC,EAAC;;;;;;;;"}