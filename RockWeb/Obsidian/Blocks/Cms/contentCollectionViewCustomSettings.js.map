{"version":3,"file":"contentCollectionViewCustomSettings.js","sources":["../../src/Cms/ContentCollectionView/filterGrid.partial.ts","../../src/Cms/ContentCollectionView/types.partial.ts","../../src/Cms/contentCollectionViewCustomSettings.ts"],"sourcesContent":["// <copyright>\r\n// Copyright by the Spark Development Network\r\n//\r\n// Licensed under the Rock Community License (the \"License\");\r\n// you may not use this file except in compliance with the License.\r\n// You may obtain a copy of the License at\r\n//\r\n// http://www.rockrms.com/license\r\n//\r\n// Unless required by applicable law or agreed to in writing, software\r\n// distributed under the License is distributed on an \"AS IS\" BASIS,\r\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n// See the License for the specific language governing permissions and\r\n// limitations under the License.\r\n// </copyright>\r\n//\r\n\r\nimport { defineComponent, PropType } from \"vue\";\r\nimport InlineCheckBox from \"@Obsidian/Controls/inlineCheckBox\";\r\nimport { FilterOptionsBag } from \"@Obsidian/ViewModels/Blocks/Cms/ContentCollectionView/filterOptionsBag\";\r\nimport { DragReorder, useDragReorder } from \"@Obsidian/Directives/dragDrop\";\r\nimport { useVModelPassthrough } from \"@Obsidian/Utility/component\";\r\n\r\n\r\nexport default defineComponent({\r\n    name: \"Cms.ContentCollectionView.CustomSettings.FilterGrid\",\r\n\r\n    components: {\r\n        InlineCheckBox\r\n    },\r\n\r\n    directives: {\r\n        DragReorder\r\n    },\r\n\r\n    props: {\r\n        modelValue: {\r\n            type: Array as PropType<FilterOptionsBag[]>,\r\n            required: true\r\n        }\r\n    },\r\n\r\n    emits: {\r\n        \"update:modelValue\": (_value: FilterOptionsBag[]) => true,\r\n        \"edit\": (_value: string) => true\r\n    },\r\n\r\n    setup(props, { emit }) {\r\n        const filters = useVModelPassthrough(props, \"modelValue\", emit);\r\n\r\n        const reorderDragOptions = useDragReorder(filters);\r\n\r\n        const onEditClick = (rowName: string): void => {\r\n            emit(\"edit\", rowName);\r\n        };\r\n\r\n        return {\r\n            filters,\r\n            onEditClick,\r\n            reorderDragOptions\r\n        };\r\n    },\r\n\r\n    template: `\r\n<div class=\"grid\">\r\n    <div class=\"table-no-border\">\r\n        <table class=\"grid-table table table-condensed table-light\">\r\n            <thead>\r\n                <tr align=\"left\">\r\n                    <th class=\"grid-columncommand\"></th>\r\n                    <th>Show</th>\r\n                    <th>Filter</th>\r\n                    <th>Filter Header Markup</th>\r\n                    <th class=\"grid-columncommand\"></th>\r\n                </tr>\r\n            </thead>\r\n\r\n            <tbody v-drag-reorder=\"reorderDragOptions\">\r\n                <tr v-for=\"row in filters\" :key=\"row.name\" align=\"left\">\r\n                    <td class=\"grid-columnreorder\" align=\"center\">\r\n                        <a class=\"minimal reorder-handle\" href=\"#\">\r\n                            <i class=\"fa fa-bars\"></i>\r\n                        </a>\r\n                    </td>\r\n                    \r\n                    <td class=\"grid-select-field\" align=\"center\">\r\n                        <InlineCheckBox v-model=\"row.show\" />\r\n                    </td>\r\n                    <td>{{ row.name }}</td>\r\n                    \r\n                    <td class=\"grid-bool-field\" align=\"center\">\r\n                        <i v-if=\"row.headerMarkup\" class=\"fa fa-check\"></i>\r\n                    </td>\r\n                    \r\n                    <td class=\"grid-columncommand\" align=\"center\">\r\n                        <a class=\"btn btn-default btn-sm\" href=\"#\" @click.prevent=\"onEditClick(row.name)\">\r\n                            <i class=\"fa fa-pencil\"></i>\r\n                        </a>\r\n                    </td>\r\n                </tr>\r\n            </tbody>\r\n        </table>\r\n    </div>\r\n</div>\r\n`\r\n});\r\n","// <copyright>\r\n// Copyright by the Spark Development Network\r\n//\r\n// Licensed under the Rock Community License (the \"License\");\r\n// you may not use this file except in compliance with the License.\r\n// You may obtain a copy of the License at\r\n//\r\n// http://www.rockrms.com/license\r\n//\r\n// Unless required by applicable law or agreed to in writing, software\r\n// distributed under the License is distributed on an \"AS IS\" BASIS,\r\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n// See the License for the specific language governing permissions and\r\n// limitations under the License.\r\n// </copyright>\r\n//\r\n\r\nexport const enum SortOrdersKey {\r\n    Relevance = \"relevance\",\r\n    Newest = \"newest\",\r\n    Oldest = \"oldest\",\r\n    Trending = \"trending\",\r\n    Alphabetical = \"alphabetical\"\r\n}\r\n","// <copyright>\r\n// Copyright by the Spark Development Network\r\n//\r\n// Licensed under the Rock Community License (the \"License\");\r\n// you may not use this file except in compliance with the License.\r\n// You may obtain a copy of the License at\r\n//\r\n// http://www.rockrms.com/license\r\n//\r\n// Unless required by applicable law or agreed to in writing, software\r\n// distributed under the License is distributed on an \"AS IS\" BASIS,\r\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n// See the License for the specific language governing permissions and\r\n// limitations under the License.\r\n// </copyright>\r\n//\r\n\r\nimport { computed, defineComponent, ref, watch } from \"vue\";\r\nimport NotificationBox from \"@Obsidian/Controls/notificationBox.obs\";\r\nimport CheckBox from \"@Obsidian/Controls/checkBox\";\r\nimport CheckBoxList from \"@Obsidian/Controls/checkBoxList\";\r\nimport CodeEditor from \"@Obsidian/Controls/codeEditor\";\r\nimport DropDownList from \"@Obsidian/Controls/dropDownList\";\r\nimport InlineCheckBox from \"@Obsidian/Controls/inlineCheckBox\";\r\nimport LoadingIndicator from \"@Obsidian/Controls/loadingIndicator\";\r\nimport Modal from \"@Obsidian/Controls/modal\";\r\nimport NumberBox from \"@Obsidian/Controls/numberBox\";\r\nimport RockButton from \"@Obsidian/Controls/rockButton\";\r\nimport RockFormFieldError from \"@Obsidian/Controls/rockFormFieldError\";\r\nimport SectionHeader from \"@Obsidian/Controls/sectionHeader\";\r\nimport TextBox from \"@Obsidian/Controls/textBox\";\r\nimport { getSecurityGrant, provideSecurityGrant, setCustomSettingsBoxValue, useInvokeBlockAction, useReloadBlock } from \"@Obsidian/Utility/block\";\r\nimport { CustomSettingsBox } from \"@Obsidian/ViewModels/Blocks/customSettingsBox\";\r\nimport { CustomSettingsBag } from \"@Obsidian/ViewModels/Blocks/Cms/ContentCollectionView/customSettingsBag\";\r\nimport { FilterOptionsBag } from \"@Obsidian/ViewModels/Blocks/Cms/ContentCollectionView/filterOptionsBag\";\r\nimport { CustomSettingsOptionsBag } from \"@Obsidian/ViewModels/Blocks/Cms/ContentCollectionView/customSettingsOptionsBag\";\r\nimport { ListItemBag } from \"@Obsidian/ViewModels/Utility/listItemBag\";\r\nimport FilterGrid from \"./ContentCollectionView/filterGrid.partial\";\r\nimport { SortOrdersKey } from \"./ContentCollectionView/types.partial\";\r\nimport { alert } from \"@Obsidian/Utility/dialogs\";\r\nimport { areEqual } from \"@Obsidian/Utility/guid\";\r\nimport { ContentCollectionListItemBag } from \"@Obsidian/ViewModels/Blocks/Cms/ContentCollectionView/contentCollectionListItemBag\";\r\n\r\n\r\n/** The items that can be picked from the Enabled Sort Orders list. */\r\nconst enabledSortOrdersItems: ListItemBag[] = [\r\n    {\r\n        value: SortOrdersKey.Relevance,\r\n        text: \"Relevance\"\r\n    },\r\n    {\r\n        value: SortOrdersKey.Newest,\r\n        text: \"Newest\"\r\n    },\r\n    {\r\n        value: SortOrdersKey.Oldest,\r\n        text: \"Oldest\"\r\n    },\r\n    {\r\n        value: SortOrdersKey.Trending,\r\n        text: \"Trending\"\r\n    },\r\n    {\r\n        value: SortOrdersKey.Alphabetical,\r\n        text: \"Alphabetical\"\r\n    }\r\n];\r\n\r\nexport default defineComponent({\r\n    name: \"Cms.ContentCollectionView.CustomSettings\",\r\n\r\n    components: {\r\n        NotificationBox,\r\n        CheckBox,\r\n        CheckBoxList,\r\n        CodeEditor,\r\n        DropDownList,\r\n        FilterGrid,\r\n        InlineCheckBox,\r\n        LoadingIndicator,\r\n        Modal,\r\n        NumberBox,\r\n        RockButton,\r\n        RockFormFieldError,\r\n        SectionHeader,\r\n        TextBox\r\n    },\r\n\r\n    emits: {\r\n        \"close\": () => true\r\n    },\r\n\r\n    setup(props, { emit }) {\r\n        const invokeBlockAction = useInvokeBlockAction();\r\n        const securityGrant = getSecurityGrant(null);\r\n        const reloadBlock = useReloadBlock();\r\n\r\n        // #region Values\r\n\r\n        const errorMessage = ref(\"\");\r\n\r\n        const isLoading = ref(true);\r\n        const isModalOpen = ref(true);\r\n        const contentCollection = ref(\"\");\r\n        const contentCollectionItems = ref<ContentCollectionListItemBag[]>([]);\r\n        const groupResultsBySource = ref(false);\r\n        const searchOnLoad = ref(false);\r\n        const numberOfResults = ref<number | null>(null);\r\n        const showFiltersPanel = ref(false);\r\n        const showFullTextSearch = ref(false);\r\n        const showSort = ref(false);\r\n        const enabledSortOrders = ref<string[]>([]);\r\n        const trendingTerm = ref(\"\");\r\n        const filters = ref<FilterOptionsBag[]>([]);\r\n        const resultsTemplate = ref(\"\");\r\n        const itemTemplate = ref(\"\");\r\n        const preSearchTemplate = ref(\"\");\r\n        const boostMatchingSegments = ref(false);\r\n        const boostMatchingRequestFilters = ref(false);\r\n        const segmentBoostAmount = ref<number | null>(null);\r\n        const requestFilterBoostAmount = ref<number | null>(null);\r\n\r\n        const editingFilter = ref<FilterOptionsBag | null>(null);\r\n        const editingFilterHeaderMarkup = ref(\"\");\r\n\r\n        // #endregion\r\n\r\n        // #region Computed Values\r\n\r\n        const saveButtonText = computed((): string => {\r\n            return errorMessage.value || !isLoading.value ? \"Save\" : \"\";\r\n        });\r\n\r\n        const isTrendingSortEnabled = computed((): boolean => {\r\n            return enabledSortOrders.value.includes(SortOrdersKey.Trending);\r\n        });\r\n\r\n        // #endregion\r\n\r\n        // #region Functions\r\n\r\n        /**\r\n         * Begins loading the current settings in the background so that the UI\r\n         * can be displayed.\r\n         */\r\n        const startLoading = async (): Promise<void> => {\r\n            const result = await invokeBlockAction<CustomSettingsBox<CustomSettingsBag, CustomSettingsOptionsBag>>(\"GetCustomSettings\");\r\n\r\n            if (result.isSuccess && result.data && result.data.settings && result.data.options) {\r\n                // Set the values for the UI.\r\n                contentCollection.value = result.data.settings.contentCollection ?? \"\";\r\n                showFiltersPanel.value = result.data.settings.showFiltersPanel;\r\n                showFullTextSearch.value = result.data.settings.showFullTextSearch;\r\n                showSort.value = result.data.settings.showSort;\r\n                numberOfResults.value = result.data.settings.numberOfResults ?? null;\r\n                searchOnLoad.value = result.data.settings.searchOnLoad;\r\n                groupResultsBySource.value = result.data.settings.groupResultsBySource;\r\n                enabledSortOrders.value = result.data.settings.enabledSortOrders ?? [];\r\n                trendingTerm.value = result.data.settings.trendingTerm ?? \"\";\r\n                filters.value = result.data.settings.filters ?? [];\r\n                resultsTemplate.value = result.data.settings.resultsTemplate ?? \"\";\r\n                itemTemplate.value = result.data.settings.itemTemplate ?? \"\";\r\n                preSearchTemplate.value = result.data.settings.preSearchTemplate ?? \"\";\r\n                boostMatchingSegments.value = result.data.settings.boostMatchingSegments;\r\n                boostMatchingRequestFilters.value = result.data.settings.boostMatchingRequestFilters;\r\n                segmentBoostAmount.value = result.data.settings.segmentBoostAmount ?? null;\r\n                requestFilterBoostAmount.value = result.data.settings.requestFilterBoostAmount ?? null;\r\n\r\n                // Set any additional information required by the UI to paint the\r\n                // custom settings interface.\r\n                securityGrant.updateToken(result.data.securityGrantToken);\r\n                contentCollectionItems.value = result.data.options.contentCollectionItems ?? [];\r\n            }\r\n            else {\r\n                errorMessage.value = result.errorMessage || \"Unknown error while loading custom settings.\";\r\n            }\r\n\r\n            isLoading.value = false;\r\n        };\r\n\r\n        // #endregion\r\n\r\n        // #region Event Handlers\r\n\r\n        const onEditFilter = (filterName: string): void => {\r\n            editingFilter.value = filters.value.find(f => f.name === filterName) ?? null;\r\n            editingFilterHeaderMarkup.value = editingFilter.value?.headerMarkup ?? \"\";\r\n        };\r\n\r\n        const onEditFilterCancel = (): void => {\r\n            editingFilter.value = null;\r\n            editingFilterHeaderMarkup.value = \"\";\r\n        };\r\n\r\n        const onEditFilterSave = (): void => {\r\n            if (editingFilter.value) {\r\n                editingFilter.value.headerMarkup = editingFilterHeaderMarkup.value;\r\n                editingFilter.value = null;\r\n            }\r\n        };\r\n\r\n        /**\r\n         * Event handler for when the person clicks the Save button and all\r\n         * components have validated their values.\r\n         */\r\n        const onSave = async (): Promise<void> => {\r\n            const box: CustomSettingsBox<CustomSettingsBag, CustomSettingsOptionsBag> = {};\r\n\r\n            setCustomSettingsBoxValue(box, \"contentCollection\", contentCollection.value);\r\n            setCustomSettingsBoxValue(box, \"showFiltersPanel\", showFiltersPanel.value);\r\n            setCustomSettingsBoxValue(box, \"showFullTextSearch\", showFullTextSearch.value);\r\n            setCustomSettingsBoxValue(box, \"showSort\", showSort.value);\r\n            setCustomSettingsBoxValue(box, \"numberOfResults\", numberOfResults.value);\r\n            setCustomSettingsBoxValue(box, \"searchOnLoad\", searchOnLoad.value);\r\n            setCustomSettingsBoxValue(box, \"groupResultsBySource\", groupResultsBySource.value);\r\n            setCustomSettingsBoxValue(box, \"enabledSortOrders\", enabledSortOrders.value);\r\n            setCustomSettingsBoxValue(box, \"trendingTerm\", trendingTerm.value);\r\n            setCustomSettingsBoxValue(box, \"filters\", filters.value);\r\n            setCustomSettingsBoxValue(box, \"resultsTemplate\", resultsTemplate.value);\r\n            setCustomSettingsBoxValue(box, \"itemTemplate\", itemTemplate.value);\r\n            setCustomSettingsBoxValue(box, \"preSearchTemplate\", preSearchTemplate.value);\r\n            setCustomSettingsBoxValue(box, \"boostMatchingSegments\", boostMatchingSegments.value);\r\n            setCustomSettingsBoxValue(box, \"boostMatchingRequestFilters\", boostMatchingRequestFilters.value);\r\n            setCustomSettingsBoxValue(box, \"segmentBoostAmount\", segmentBoostAmount.value);\r\n            setCustomSettingsBoxValue(box, \"requestFilterBoostAmount\", requestFilterBoostAmount.value);\r\n\r\n            const data = {\r\n                box\r\n            };\r\n\r\n            const result = await invokeBlockAction(\"SaveCustomSettings\", data);\r\n\r\n            if (result.isSuccess) {\r\n                isModalOpen.value = false;\r\n                reloadBlock();\r\n            }\r\n            else {\r\n                alert(result.errorMessage || \"Unable to save block settings.\");\r\n            }\r\n        };\r\n\r\n        // #endregion\r\n\r\n        provideSecurityGrant(securityGrant);\r\n\r\n        watch(isModalOpen, () => {\r\n            if (!isModalOpen.value) {\r\n                emit(\"close\");\r\n            }\r\n        });\r\n\r\n        watch(contentCollection, () => {\r\n            const collection = contentCollectionItems.value.find(l => areEqual(l.value, contentCollection.value));\r\n            const newFilters = [...filters.value];\r\n\r\n            if (!collection) {\r\n                console.log(\"no selection\");\r\n                return;\r\n            }\r\n\r\n            const collectionFilters = collection.filters ?? [];\r\n\r\n            // Check for any filters on the selected collection that don't already\r\n            // exist in the array of filters.\r\n            for (const f of collectionFilters) {\r\n                if (!newFilters.some(a => a.sourceKey === f.value)) {\r\n                    newFilters.push({\r\n                        show: false,\r\n                        sourceKey: f.value,\r\n                        name: f.text,\r\n                        headerMarkup: \"\"\r\n                    });\r\n                }\r\n            }\r\n\r\n            // Check for any filters that are not in the selected collection\r\n            // that should be removed.\r\n            for (let filterIndex = 0; filterIndex < newFilters.length;) {\r\n                if (!collectionFilters.some(f => f.value === newFilters[filterIndex].sourceKey)) {\r\n                    newFilters.splice(filterIndex, 1);\r\n                }\r\n                else {\r\n                    filterIndex++;\r\n                }\r\n            }\r\n\r\n            filters.value = newFilters;\r\n        });\r\n\r\n        startLoading();\r\n\r\n        return {\r\n            boostMatchingRequestFilters,\r\n            boostMatchingSegments,\r\n            contentCollection,\r\n            contentCollectionItems,\r\n            editingFilter,\r\n            editingFilterHeaderMarkup,\r\n            enabledSortOrders,\r\n            enabledSortOrdersItems,\r\n            errorMessage,\r\n            filters,\r\n            groupResultsBySource,\r\n            isLoading,\r\n            isModalOpen,\r\n            isTrendingSortEnabled,\r\n            itemTemplate,\r\n            numberOfResults,\r\n            onEditFilter,\r\n            onEditFilterCancel,\r\n            onEditFilterSave,\r\n            onSave,\r\n            preSearchTemplate,\r\n            requestFilterBoostAmount,\r\n            saveButtonText,\r\n            searchOnLoad,\r\n            segmentBoostAmount,\r\n            showFiltersPanel,\r\n            showFullTextSearch,\r\n            showSort,\r\n            resultsTemplate,\r\n            trendingTerm\r\n        };\r\n    },\r\n\r\n    template: `\r\n<Modal v-model=\"isModalOpen\"\r\n    title=\"Content Collection View Settings\"\r\n    :saveText=\"saveButtonText\"\r\n    @save=\"onSave\">\r\n\r\n    <NotificationBox v-if=\"errorMessage\"\r\n        v-text=\"errorMessage\"\r\n        alertType=\"warning\" />\r\n\r\n    <LoadingIndicator v-else-if=\"isLoading\" :delay=\"500\" />\r\n\r\n    <div v-else>\r\n\r\n        <div class=\"row\">\r\n            <div class=\"col-md-6\">\r\n                <DropDownList v-model=\"contentCollection\"\r\n                    label=\"Content Collection\"\r\n                    :items=\"contentCollectionItems\"\r\n                    rules=\"required\" />\r\n            </div>\r\n        </div>\r\n\r\n        <div class=\"row\">\r\n            <div class=\"col-md-4\">\r\n                <CheckBox v-model=\"showFiltersPanel\"\r\n                    label=\"Show Filters Panel\" />\r\n            </div>\r\n\r\n            <div class=\"col-md-4\">\r\n                <CheckBox v-model=\"showFullTextSearch\"\r\n                    label=\"Show Full-Text Search\" />\r\n            </div>\r\n\r\n            <div class=\"col-md-4\">\r\n                <CheckBox v-model=\"showSort\"\r\n                    label=\"Show Sort\" />\r\n            </div>\r\n        </div>\r\n\r\n        <div class=\"row\">\r\n            <div class=\"col-md-4\">\r\n                <NumberBox v-model=\"numberOfResults\"\r\n                    rules=\"gte:0\"\r\n                    label=\"Number of Results\" />\r\n            </div>\r\n\r\n            <div class=\"col-md-4\">\r\n                <CheckBox v-model=\"searchOnLoad\"\r\n                    label=\"Search On Load\"\r\n                    help=\"Determines if initial content should be shown when the block is loaded.\" />\r\n            </div>\r\n\r\n            <div class=\"col-md-4\">\r\n                <CheckBox v-model=\"groupResultsBySource\"\r\n                    label=\"Group Results By Source\"\r\n                    help=\"This will group the results by the source. When enabled the number of results will be used for each source type.\" />\r\n            </div>\r\n        </div>\r\n\r\n        <CheckBoxList v-if=\"showSort\"\r\n            v-model=\"enabledSortOrders\"\r\n            label=\"Enabled Sort Orders\"\r\n            help=\"Determines the sort options that should be made available.\"\r\n            horizontal\r\n            :repeatColumns=\"5\"\r\n            :items=\"enabledSortOrdersItems\" />\r\n\r\n        <div class=\"row\">\r\n            <div class=\"col-md-6\">\r\n                <TextBox v-if=\"isTrendingSortEnabled\"\r\n                    v-model=\"trendingTerm\"\r\n                    label=\"Trending Term\"\r\n                    rules=\"required\"\r\n                    help=\"The term that should be used in the sort dropdown to describe popular/trending items.\" />\r\n            </div>\r\n        </div>\r\n\r\n        <CodeEditor v-model=\"resultsTemplate\"\r\n            label=\"Results Template\"\r\n            mode=\"lava\"\r\n            rules=\"required\" />\r\n\r\n        <CodeEditor v-model=\"itemTemplate\"\r\n            label=\"Item Template\"\r\n            mode=\"lava\"\r\n            rules=\"required\" />\r\n\r\n        <CodeEditor v-model=\"preSearchTemplate\"\r\n            label=\"Pre-Search Template\"\r\n            mode=\"lava\" />\r\n\r\n        <div v-if=\"showFiltersPanel\">\r\n            <SectionHeader title=\"Filters\"\r\n                description=\"Determine which filters you would like to show in what order.\" />\r\n\r\n            <div v-if=\"editingFilter\" class=\"margin-b-md\">\r\n                <h3 class=\"title\">{{ editingFilter.name }} Filter</h3>\r\n\r\n                <CodeEditor v-model=\"editingFilterHeaderMarkup\"\r\n                    label=\"Filter Header Markup\"\r\n                    mode=\"lava\" />\r\n\r\n                <RockFormFieldError label=\"Filter\" error=\"You must finish editing the filter before proceeding.\" />\r\n\r\n                <div class=\"actions\">\r\n                    <RockButton btnType=\"primary\" btnSize=\"xs\" @click=\"onEditFilterSave\">Save</RockButton>\r\n                    <RockButton btnType=\"link\" btnSize=\"xs\" @click=\"onEditFilterCancel\">Cancel</RockButton>\r\n                </div>\r\n            </div>\r\n\r\n            <FilterGrid v-else v-model=\"filters\" @edit=\"onEditFilter\" />\r\n        </div>\r\n\r\n        <SectionHeader title=\"Personalization\"\r\n            description=\"The settings below allow you to boost items based on personalization settings in Rock.\" />\r\n\r\n        <div class=\"row\">\r\n            <div class=\"col-md-4\">\r\n                <CheckBox v-model=\"boostMatchingSegments\"\r\n                    label=\"Boost Matching Segments\"\r\n                    help=\"Determines if the search should boost shared segments between the individual and the content results.\" />\r\n\r\n                <NumberBox v-if=\"boostMatchingSegments\"\r\n                    v-model=\"segmentBoostAmount\"\r\n                    label=\"Segment Boost Amount\"\r\n                    help=\"The amount of boost to apply to each shared segment. A value of 1 = no boost, a value of > 1 will increase the match score while a value of < 1 will reduce the match score.\" />\r\n            </div>\r\n\r\n            <div class=\"col-md-4\">\r\n                <CheckBox v-model=\"boostMatchingRequestFilters\"\r\n                    label=\"Boost Matching Request Filters\"\r\n                    help=\"Determines if the search should boost shared segments current request and the content results.\" />\r\n\r\n                <NumberBox v-if=\"boostMatchingRequestFilters\"\r\n                    v-model=\"requestFilterBoostAmount\"\r\n                    label=\"Request Filter Boost Amount\"\r\n                    help=\"The amount of boost to apply to each shared request filter. A value of 1 = no boost, a value of > 1 will increase the match score while a value of < 1 will reduce the match score.\" />\r\n            </div>\r\n        </div>\r\n\r\n    </div>\r\n\r\n</Modal>\r\n`\r\n});\r\n"],"names":["defineComponent","name","components","InlineCheckBox","directives","DragReorder","props","modelValue","type","Array","required","emits","_value","setup","_ref","emit","filters","useVModelPassthrough","reorderDragOptions","useDragReorder","onEditClick","rowName","template","SortOrdersKey","enabledSortOrdersItems","value","Relevance","text","Newest","Oldest","Trending","Alphabetical","NotificationBox","CheckBox","CheckBoxList","CodeEditor","DropDownList","FilterGrid","LoadingIndicator","Modal","NumberBox","RockButton","RockFormFieldError","SectionHeader","TextBox","close","invokeBlockAction","useInvokeBlockAction","securityGrant","getSecurityGrant","reloadBlock","useReloadBlock","errorMessage","ref","isLoading","isModalOpen","contentCollection","contentCollectionItems","groupResultsBySource","searchOnLoad","numberOfResults","showFiltersPanel","showFullTextSearch","showSort","enabledSortOrders","trendingTerm","resultsTemplate","itemTemplate","preSearchTemplate","boostMatchingSegments","boostMatchingRequestFilters","segmentBoostAmount","requestFilterBoostAmount","editingFilter","editingFilterHeaderMarkup","saveButtonText","computed","isTrendingSortEnabled","includes","startLoading","_ref2","_asyncToGenerator","result","isSuccess","data","settings","options","_result$data$settings","_result$data$settings2","_result$data$settings3","_result$data$settings4","_result$data$settings5","_result$data$settings6","_result$data$settings7","_result$data$settings8","_result$data$settings9","_result$data$settings10","_result$data$options$","updateToken","securityGrantToken","apply","arguments","onEditFilter","filterName","_filters$value$find","_editingFilter$value$","_editingFilter$value","find","f","headerMarkup","onEditFilterCancel","onEditFilterSave","onSave","_ref3","box","setCustomSettingsBoxValue","alert","provideSecurityGrant","watch","_collection$filters","collection","l","areEqual","newFilters","console","log","collectionFilters","_iterator","_createForOfIteratorHelper","_step","_loop2","some","a","sourceKey","push","show","s","n","done","err","e","_loop","_filterIndex","splice","filterIndex","length"],"mappings":"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"}