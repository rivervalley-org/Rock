{"version":3,"file":"confirmationEmail.js","sources":["../../../../src/WorkFlow/FormBuilder/Shared/confirmationEmail.ts"],"sourcesContent":["// <copyright>\r\n// Copyright by the Spark Development Network\r\n//\r\n// Licensed under the Rock Community License (the \"License\");\r\n// you may not use this file except in compliance with the License.\r\n// You may obtain a copy of the License at\r\n//\r\n// http://www.rockrms.com/license\r\n//\r\n// Unless required by applicable law or agreed to in writing, software\r\n// distributed under the License is distributed on an \"AS IS\" BASIS,\r\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n// See the License for the specific language governing permissions and\r\n// limitations under the License.\r\n// </copyright>\r\n//\r\n\r\nimport { defineComponent, PropType, ref, watch } from \"vue\";\r\nimport DropDownList from \"@Obsidian/Controls/dropDownList\";\r\nimport InlineSwitch from \"@Obsidian/Controls/inlineSwitch\";\r\nimport TransitionVerticalCollapse from \"@Obsidian/Controls/transitionVerticalCollapse\";\r\nimport { ListItemBag } from \"@Obsidian/ViewModels/Utility/listItemBag\";\r\nimport EmailSource from \"./emailSource\";\r\nimport SectionContainer from \"@Obsidian/Controls/sectionContainer\";\r\nimport { FormConfirmationEmail, FormEmailSource } from \"./types.partial\";\r\n\r\n/**\r\n * Displays the UI for the Confirmation Email component in the Communications\r\n * screen.\r\n */\r\nexport default defineComponent({\r\n    name: \"Workflow.FormBuilderDetail.ConfirmationEmail\",\r\n\r\n    components: {\r\n        DropDownList,\r\n        EmailSource,\r\n        InlineSwitch,\r\n        SectionContainer,\r\n        TransitionVerticalCollapse\r\n    },\r\n\r\n    props: {\r\n        modelValue: {\r\n            type: Object as PropType<FormConfirmationEmail>,\r\n            required: true\r\n        },\r\n\r\n        recipientOptions: {\r\n            type: Array as PropType<ListItemBag[]>,\r\n            default: []\r\n        },\r\n\r\n        sourceTemplateOptions: {\r\n            type: Array as PropType<ListItemBag[]>,\r\n            default: []\r\n        }\r\n    },\r\n\r\n    emits: [\r\n        \"update:modelValue\"\r\n    ],\r\n\r\n    setup(props, { emit }) {\r\n        const enabled = ref(props.modelValue.enabled ?? false);\r\n        const recipientAttributeGuid = ref(props.modelValue.recipientAttributeGuid ?? null);\r\n        const source = ref<FormEmailSource>(props.modelValue.source ?? {});\r\n\r\n        // Watch for changes in our modelValue and then update all our internal values.\r\n        watch(() => props.modelValue, () => {\r\n            enabled.value = props.modelValue.enabled ?? false;\r\n            recipientAttributeGuid.value = props.modelValue.recipientAttributeGuid ?? null;\r\n            source.value = props.modelValue.source ?? {};\r\n        });\r\n\r\n        // Watch for changes on any of our internal values and then update the modelValue.\r\n        watch([enabled, recipientAttributeGuid, source], () => {\r\n            const newValue: FormConfirmationEmail = {\r\n                ...props.modelValue,\r\n                enabled: enabled.value,\r\n                recipientAttributeGuid: recipientAttributeGuid.value,\r\n                source: source.value\r\n            };\r\n\r\n            emit(\"update:modelValue\", newValue);\r\n        });\r\n\r\n        return {\r\n            enabled,\r\n            recipientAttributeGuid,\r\n            source\r\n        };\r\n    },\r\n\r\n    template: `\r\n<SectionContainer v-model=\"enabled\"\r\n    toggleText=\"Enable\"\r\n    title=\"Confirmation Email\"\r\n    description=\"The following settings will be used to send an email to the individual who submitted the form.\">\r\n    <div class=\"row\">\r\n        <div class=\"col-md-4\">\r\n            <DropDownList v-model=\"recipientAttributeGuid\"\r\n                label=\"Recipient\"\r\n                rules=\"required\"\r\n                :items=\"recipientOptions\" />\r\n        </div>\r\n    </div>\r\n\r\n    <div class=\"mt-3\">\r\n        <EmailSource v-model=\"source\" :templateOptions=\"sourceTemplateOptions\" />\r\n    </div>\r\n</SectionContainer>\r\n`\r\n});\r\n"],"names":["defineComponent","name","components","DropDownList","EmailSource","InlineSwitch","SectionContainer","TransitionVerticalCollapse","props","modelValue","type","Object","required","recipientOptions","Array","default","sourceTemplateOptions","emits","setup","_ref","_props$modelValue$ena","_props$modelValue$rec","_props$modelValue$sou","emit","enabled","ref","recipientAttributeGuid","source","watch","_props$modelValue$ena2","_props$modelValue$rec2","_props$modelValue$sou2","value","newValue","_objectSpread","template"],"mappings":"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"}