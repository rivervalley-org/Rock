{"version":3,"file":"smsTestTransport.obs.js","sources":["../../src/Utility/SmsTestTransport/attachment.partial.obs","../../../Rock.JavaScript.Obsidian/node_modules/style-inject/dist/style-inject.es.js","../../src/Utility/smsTestTransport.obs"],"sourcesContent":["<!-- Copyright by the Spark Development Network; Licensed under the Rock Community License -->\r\n<template>\r\n    <img v-if=\"isImage\"\r\n         :src=\"attachment.url\"\r\n         :alt=\"attachment.fileName\"\r\n         class=\"img-responsive attachment-image\" />\r\n    <div v-else\r\n        class=\"attachment-document\">\r\n        <i class=\"fa fa-file\"></i>\r\n        <a :href=\"attachment.url\">{{ attachment.fileName }}</a>\r\n    </div>\r\n</template>\r\n\r\n<style scoped>\r\n.attachment-image {\r\n    border-radius: 6px;\r\n    max-height: 320px;\r\n}\r\n\r\n.attachment-document {\r\n    border-radius: 6px;\r\n    border: 1px solid #ccc;\r\n    background-color: white;\r\n    color: var(--text-color);\r\n    padding: 4px 12px;\r\n\r\n}\r\n\r\n.attachment-document .fa {\r\n    margin-right: 12px;\r\n}\r\n</style>\r\n\r\n<script setup lang=\"ts\">\r\n    import { computed, PropType } from \"vue\";\r\n\r\n    interface IAttachment {\r\n        fileName: string;\r\n\r\n        url: string;\r\n    }\r\n\r\n    const props = defineProps({\r\n        /** The URL of the attachment to be displayed. */\r\n        attachment: {\r\n            type: Object as PropType<Record<string, string>>,\r\n            required: true\r\n        }\r\n    });\r\n\r\n    // #region Values\r\n\r\n\r\n    // #endregion\r\n\r\n    // #region Computed Values\r\n\r\n    const isImage = computed((): boolean => {\r\n        return (props.attachment as unknown as IAttachment).url.includes(\"GetImage.ashx\");\r\n    });\r\n\r\n    // #endregion\r\n\r\n    // #region Functions\r\n\r\n    // #endregion\r\n\r\n    // #region Event Handlers\r\n\r\n    // #endregion\r\n</script>\r\n","function styleInject(css, ref) {\n  if ( ref === void 0 ) ref = {};\n  var insertAt = ref.insertAt;\n\n  if (!css || typeof document === 'undefined') { return; }\n\n  var head = document.head || document.getElementsByTagName('head')[0];\n  var style = document.createElement('style');\n  style.type = 'text/css';\n\n  if (insertAt === 'top') {\n    if (head.firstChild) {\n      head.insertBefore(style, head.firstChild);\n    } else {\n      head.appendChild(style);\n    }\n  } else {\n    head.appendChild(style);\n  }\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nexport default styleInject;\n","<!-- Copyright by the Spark Development Network; Licensed under the Rock Community License -->\r\n<template>\r\n    <Block title=\"SMS Test Transport\">\r\n        <template #preBody>\r\n            <ConnectionStatus :isReconnecting=\"isReconnecting\"\r\n                              :isDisconnected=\"isDisconnected\" />\r\n        </template>\r\n\r\n        <div class=\"d-flex flex-column outer-container\">\r\n            <div ref=\"scrollContainer\"\r\n                 class=\"flex-grow-1 messages-container\">\r\n                <div v-for=\"msg in messages\"\r\n                     :class=\"getMessageClass(msg)\">\r\n                    <div class=\"message-bubble\">\r\n                        <span class=\"message-numbers\"\r\n                              @click=\"onMessageClick(msg)\">\r\n                            From: {{ msg.fromNumber }}<br />\r\n                            To: {{ msg.toNumber }}<br />\r\n                        </span>\r\n                        <br />\r\n                        <div class=\"message-text\">\r\n                            {{ msg.body }}\r\n                        </div>\r\n                        <Attachment v-for=\"attachment in msg.attachments\"\r\n                                    :attachment=\"attachment\" />\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            <div class=\"footer\">\r\n                <RockForm @submit=\"onSubmitMessage\"\r\n                          :formResetKey=\"formResetKey\">\r\n                    <div class=\"d-flex\">\r\n                        <div class=\"mr-2\">\r\n                            <TextBox v-model=\"fromNumber\"\r\n                                     label=\"From (Outside Number)\"\r\n                                     rules=\"required\"\r\n                                     :disabled=\"isFormDisabled\" />\r\n                        </div>\r\n                        <div class=\"mr-2 flex-grow-1 to-phone-number\">\r\n                            <DropDownList v-model=\"toNumber\"\r\n                                          label=\"To (Rock Number)\"\r\n                                          :items=\"config.phoneNumbers\"\r\n                                          rules=\"required\"\r\n                                          :showBlankItem=\"false\"\r\n                                          :disabled=\"isFormDisabled\" />\r\n                        </div>\r\n                        <div class=\"mr-2 flex-grow-1 to-pipeline\">\r\n                            <DropDownList v-model=\"toPipeline\"\r\n                                          label=\"Pipeline\"\r\n                                          :items=\"config.pipelines\"\r\n                                          :disabled=\"isFormDisabled\" />\r\n                        </div>\r\n                        <div class=\"flex-grow-1 mr-2\">\r\n                            <TextBox v-model=\"body\"\r\n                                     label=\"Body\"\r\n                                     rules=\"required\"\r\n                                     :disabled=\"isFormDisabled\" />\r\n                        </div>\r\n                        <div style=\"margin-top: 26px;\">\r\n                            <RockButton :btnType=\"BtnType.Primary\"\r\n                                        type=\"submit\"\r\n                                        :disabled=\"isFormDisabled\">Submit</RockButton>\r\n                        </div>\r\n                    </div>\r\n                </RockForm>\r\n            </div>\r\n        </div>\r\n    </Block>\r\n</template>\r\n\r\n<style scoped>\r\n.outer-container {\r\n    position: absolute;\r\n    left: 0;\r\n    top: 0;\r\n    right: 0;\r\n    bottom: 0;\r\n}\r\n\r\n.footer {\r\n    border-top: 1px solid #eee;\r\n    padding: 12px;\r\n}\r\n\r\n.to-phone-number {\r\n    min-width: 100px;\r\n    max-width: 300px;\r\n}\r\n\r\n.to-pipeline {\r\n    min-width: 100px;\r\n    max-width: 200px;\r\n}\r\n\r\n.messages-container {\r\n    overflow-y: auto;\r\n    padding: 12px;\r\n}\r\n\r\n.message-container {\r\n    margin: 0px 0px 12px 0px;\r\n    display: flex;\r\n}\r\n\r\n.message-container.message-outgoing {\r\n    justify-content: end;\r\n}\r\n\r\n.message-bubble {\r\n    max-width: 75%;\r\n    padding: 8px;\r\n    border-radius: 8px;\r\n    background-color: rgb(16, 153, 244);\r\n    color: white;\r\n}\r\n\r\n.message-incoming .message-bubble {\r\n    background: rgb(49, 176, 69);\r\n}\r\n\r\n.message-numbers {\r\n    cursor: pointer;\r\n}\r\n\r\n.message-text {\r\n    max-width: 480px;\r\n}\r\n</style>\r\n\r\n<script setup lang=\"ts\">\r\n    import Attachment from \"./SmsTestTransport/attachment.partial.obs\";\r\n    import Block from \"@Obsidian/Templates/block\";\r\n    import ConnectionStatus from \"@Obsidian/Controls/connectionStatus.obs\";\r\n    import DropDownList from \"@Obsidian/Controls/dropDownList\";\r\n    import TextBox from \"@Obsidian/Controls/textBox\";\r\n    import RockButton from \"@Obsidian/Controls/rockButton\";\r\n    import RockForm from \"@Obsidian/Controls/rockForm\";\r\n    import { BtnType } from \"@Obsidian/Enums/Controls/btnType\";\r\n    import { computed, nextTick, ref } from \"vue\";\r\n    import { getTopic, ITopic } from \"@Obsidian/Utility/realTime\";\r\n    import { ListItemBag } from \"@Obsidian/ViewModels/Utility/listItemBag\";\r\n    import { useConfigurationValues } from \"@Obsidian/Utility/block\";\r\n    import { newGuid } from \"@Obsidian/Utility/guid\";\r\n    import { Guid } from \"@Obsidian/Types\";\r\n\r\n    type SmsAttachment = {\r\n        fileName: string;\r\n\r\n        url: string\r\n    };\r\n\r\n    type SmsMessage = {\r\n        fromNumber?: string;\r\n        toNumber?: string;\r\n        pipelineGuid?: Guid;\r\n        body?: string;\r\n        attachments?: SmsAttachment[]\r\n    };\r\n\r\n    type TrackedSmsMessage = SmsMessage & {\r\n        incoming: boolean;\r\n    };\r\n\r\n    type Configuration = {\r\n        phoneNumbers: ListItemBag[];\r\n\r\n        pipelines: ListItemBag[];\r\n    };\r\n\r\n    interface ITestCommunicationTransportTopic {\r\n        messageReceived(message: SmsMessage): Promise<void>;\r\n    }\r\n\r\n    const config = useConfigurationValues<Configuration>();\r\n\r\n    // #region Values\r\n\r\n    const realTimeTopic = ref<ITopic<ITestCommunicationTransportTopic> | null>(null);\r\n    const messages = ref<TrackedSmsMessage[]>([]);\r\n    const fromNumber = ref(\"\");\r\n    const toNumber = ref(config.phoneNumbers.length > 0 ? config.phoneNumbers[0].value ?? \"\" : \"\");\r\n    const toPipeline = ref(\"\");\r\n    const body = ref(\"\");\r\n    const formResetKey = ref(\"\");\r\n    const isReconnecting = ref(false);\r\n    const isDisconnected = ref(false);\r\n    const scrollContainer = ref<HTMLDivElement | null>(null);\r\n\r\n    // #endregion\r\n\r\n    // #region Computed Values\r\n\r\n    const isFormDisabled = computed(() => {\r\n        return isReconnecting.value || isDisconnected.value;\r\n    });\r\n\r\n    // #endregion\r\n\r\n    // #region Functions\r\n\r\n    /**\r\n     * Attempt to reconnect to the server and rejoin all channels that were\r\n     * previously joined.\r\n     */\r\n    async function startReconnect(): Promise<void> {\r\n        isReconnecting.value = true;\r\n        realTimeTopic.value = null;\r\n\r\n        await nextTick();\r\n\r\n        try {\r\n            await startRealTime();\r\n\r\n            isReconnecting.value = false;\r\n        }\r\n        catch (error) {\r\n            console.error(error instanceof Error ? error.message : error);\r\n            isDisconnected.value = true;\r\n        }\r\n    }\r\n\r\n    async function startRealTime(): Promise<void> {\r\n        const topic = await getTopic<ITestCommunicationTransportTopic>(\"Rock.RealTime.Topics.TestCommunicationTransportTopic\");\r\n\r\n        topic.on(\"smsMessageSent\", onSmsMessageSent);\r\n        topic.onReconnecting(() => isReconnecting.value = true);\r\n        topic.onReconnected(() => isReconnecting.value = false);\r\n        topic.onDisconnected(() => startReconnect());\r\n\r\n        realTimeTopic.value = topic;\r\n    }\r\n\r\n    function getMessageClass(message: TrackedSmsMessage): string[] {\r\n        if (message.incoming) {\r\n            return [\"message-container\", \"message-incoming\"];\r\n        }\r\n        else {\r\n            return [\"message-container\", \"message-outgoing\"];\r\n        }\r\n    }\r\n\r\n    async function onSubmitMessage(): Promise<void> {\r\n        messages.value.push({\r\n            fromNumber: fromNumber.value,\r\n            toNumber: toNumber.value,\r\n            body: body.value,\r\n            incoming: true\r\n        });\r\n\r\n        try {\r\n            await realTimeTopic.value?.server.messageReceived({\r\n                fromNumber: fromNumber.value,\r\n                toNumber: toNumber.value,\r\n                pipelineGuid: toPipeline.value || undefined,\r\n                body: body.value\r\n            });\r\n        }\r\n        catch (error) {\r\n            messages.value.pop();\r\n            throw error;\r\n        }\r\n\r\n        body.value = \"\";\r\n        formResetKey.value = newGuid();\r\n\r\n        setTimeout(() => {\r\n            if (scrollContainer.value) {\r\n                scrollContainer.value.scrollTo(0, scrollContainer.value.scrollHeight);\r\n            }\r\n        }, 10);\r\n    }\r\n\r\n    function onMessageClick(message: TrackedSmsMessage): void {\r\n        if (message.incoming) {\r\n            fromNumber.value = message.fromNumber ?? \"\";\r\n            toNumber.value = message.toNumber ?? \"\";\r\n        }\r\n        else {\r\n            fromNumber.value = message.toNumber ?? \"\";\r\n            toNumber.value = message.fromNumber ?? \"\";\r\n        }\r\n    }\r\n\r\n    // #endregion\r\n\r\n    // #region Event Handlers\r\n\r\n    function onSmsMessageSent(message: SmsMessage): void {\r\n        const performScroll = scrollContainer.value\r\n            && scrollContainer.value.scrollHeight - scrollContainer.value.offsetHeight - scrollContainer.value.scrollTop < 10;\r\n\r\n        messages.value.push({\r\n            ...message,\r\n            incoming: false\r\n        });\r\n\r\n        setTimeout(() => {\r\n            if (scrollContainer.value && performScroll) {\r\n                scrollContainer.value.scroll({\r\n                    top: scrollContainer.value.scrollHeight,\r\n                    behavior: \"smooth\"\r\n                });\r\n            }\r\n        }, 10);\r\n    }\r\n\r\n    // #endregion\r\n\r\n    startRealTime();\r\n</script>\r\n"],"names":["isImage","computed","props","attachment","url","includes","styleInject","css","ref","insertAt","document","head","getElementsByTagName","style","createElement","type","firstChild","insertBefore","appendChild","styleSheet","cssText","createTextNode","config","useConfigurationValues","realTimeTopic","messages","fromNumber","toNumber","phoneNumbers","length","_config$phoneNumbers$","value","toPipeline","body","formResetKey","isReconnecting","isDisconnected","scrollContainer","isFormDisabled","startReconnect","_startReconnect","apply","arguments","_asyncToGenerator","nextTick","startRealTime","error","console","Error","message","_startRealTime","topic","getTopic","on","onSmsMessageSent","onReconnecting","onReconnected","onDisconnected","getMessageClass","incoming","onSubmitMessage","_onSubmitMessage","push","_realTimeTopic$value","server","messageReceived","pipelineGuid","undefined","pop","newGuid","setTimeout","scrollTo","scrollHeight","onMessageClick","_message$fromNumber","_message$toNumber","_message$toNumber2","_message$fromNumber2","performScroll","offsetHeight","scrollTop","_objectSpread","scroll","top","behavior"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;MAyDI,IAAA,IAAMA,OAAO,GAAGC,QAAQ,CAAC,MAAe;YACpC,OAAQC,KAAK,CAACC,UAAU,CAA4BC,GAAG,CAACC,QAAQ,CAAC,eAAe,CAAC,CAAA;MACrF,KAAC,CAAC,CAAA;;;;;;;;;;;;;;MC3DN,SAASC,WAAWA,CAACC,GAAG,EAAEC,GAAG,EAAE;QAC7B,IAAKA,GAAG,KAAK,KAAK,CAAC,EAAGA,GAAG,GAAG,EAAE,CAAA;MAC9B,EAAA,IAAIC,QAAQ,GAAGD,GAAG,CAACC,QAAQ,CAAA;MAE3B,EAAA,IAAI,CAACF,GAAG,IAAI,OAAOG,QAAQ,KAAK,WAAW,EAAE;MAAE,IAAA,OAAA;MAAQ,GAAA;MAEvD,EAAA,IAAIC,IAAI,GAAGD,QAAQ,CAACC,IAAI,IAAID,QAAQ,CAACE,oBAAoB,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,CAAA;MACpE,EAAA,IAAIC,KAAK,GAAGH,QAAQ,CAACI,aAAa,CAAC,OAAO,CAAC,CAAA;QAC3CD,KAAK,CAACE,IAAI,GAAG,UAAU,CAAA;QAEvB,IAAIN,QAAQ,KAAK,KAAK,EAAE;UACtB,IAAIE,IAAI,CAACK,UAAU,EAAE;YACnBL,IAAI,CAACM,YAAY,CAACJ,KAAK,EAAEF,IAAI,CAACK,UAAU,CAAC,CAAA;MAC3C,KAAC,MAAM;MACLL,MAAAA,IAAI,CAACO,WAAW,CAACL,KAAK,CAAC,CAAA;MACzB,KAAA;MACF,GAAC,MAAM;MACLF,IAAAA,IAAI,CAACO,WAAW,CAACL,KAAK,CAAC,CAAA;MACzB,GAAA;QAEA,IAAIA,KAAK,CAACM,UAAU,EAAE;MACpBN,IAAAA,KAAK,CAACM,UAAU,CAACC,OAAO,GAAGb,GAAG,CAAA;MAChC,GAAC,MAAM;UACLM,KAAK,CAACK,WAAW,CAACR,QAAQ,CAACW,cAAc,CAACd,GAAG,CAAC,CAAC,CAAA;MACjD,GAAA;MACF;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;UCqJI,IAAMe,MAAM,GAAGC,sBAAsB,EAAiB,CAAA;MAItD,IAAA,IAAMC,aAAa,GAAGhB,GAAG,CAAkD,IAAI,CAAC,CAAA;MAChF,IAAA,IAAMiB,QAAQ,GAAGjB,GAAG,CAAsB,EAAE,CAAC,CAAA;MAC7C,IAAA,IAAMkB,UAAU,GAAGlB,GAAG,CAAC,EAAE,CAAC,CAAA;MAC1B,IAAA,IAAMmB,QAAQ,GAAGnB,GAAG,CAACc,MAAM,CAACM,YAAY,CAACC,MAAM,GAAG,CAAC,GAAA,CAAAC,qBAAA,GAAGR,MAAM,CAACM,YAAY,CAAC,CAAC,CAAC,CAACG,KAAK,MAAA,IAAA,IAAAD,qBAAA,KAAA,KAAA,CAAA,GAAAA,qBAAA,GAAI,EAAE,GAAG,EAAE,CAAC,CAAA;MAC9F,IAAA,IAAME,UAAU,GAAGxB,GAAG,CAAC,EAAE,CAAC,CAAA;MAC1B,IAAA,IAAMyB,IAAI,GAAGzB,GAAG,CAAC,EAAE,CAAC,CAAA;MACpB,IAAA,IAAM0B,YAAY,GAAG1B,GAAG,CAAC,EAAE,CAAC,CAAA;MAC5B,IAAA,IAAM2B,cAAc,GAAG3B,GAAG,CAAC,KAAK,CAAC,CAAA;MACjC,IAAA,IAAM4B,cAAc,GAAG5B,GAAG,CAAC,KAAK,CAAC,CAAA;MACjC,IAAA,IAAM6B,eAAe,GAAG7B,GAAG,CAAwB,IAAI,CAAC,CAAA;MAMxD,IAAA,IAAM8B,cAAc,GAAGrC,QAAQ,CAAC,MAAM;MAClC,MAAA,OAAOkC,cAAc,CAACJ,KAAK,IAAIK,cAAc,CAACL,KAAK,CAAA;MACvD,KAAC,CAAC,CAAA;MAAC,IAAA,SAUYQ,cAAcA,GAAA;MAAA,MAAA,OAAAC,eAAA,CAAAC,KAAA,CAAA,IAAA,EAAAC,SAAA,CAAA,CAAA;MAAA,KAAA;MAAA,IAAA,SAAAF,eAAA,GAAA;YAAAA,eAAA,GAAAG,iBAAA,CAA7B,aAA+C;cAC3CR,cAAc,CAACJ,KAAK,GAAG,IAAI,CAAA;cAC3BP,aAAa,CAACO,KAAK,GAAG,IAAI,CAAA;MAE1B,QAAA,MAAMa,QAAQ,EAAE,CAAA;cAEhB,IAAI;MACA,UAAA,MAAMC,aAAa,EAAE,CAAA;gBAErBV,cAAc,CAACJ,KAAK,GAAG,KAAK,CAAA;eAC/B,CACD,OAAOe,KAAK,EAAE;MACVC,UAAAA,OAAO,CAACD,KAAK,CAACA,KAAK,YAAYE,KAAK,GAAGF,KAAK,CAACG,OAAO,GAAGH,KAAK,CAAC,CAAA;gBAC7DV,cAAc,CAACL,KAAK,GAAG,IAAI,CAAA;MAC/B,SAAA;aACH,CAAA,CAAA;MAAA,MAAA,OAAAS,eAAA,CAAAC,KAAA,CAAA,IAAA,EAAAC,SAAA,CAAA,CAAA;MAAA,KAAA;MAAA,IAAA,SAEcG,aAAaA,GAAA;MAAA,MAAA,OAAAK,cAAA,CAAAT,KAAA,CAAA,IAAA,EAAAC,SAAA,CAAA,CAAA;MAAA,KAAA;MAAA,IAAA,SAAAQ,cAAA,GAAA;YAAAA,cAAA,GAAAP,iBAAA,CAA5B,aAA8C;MAC1C,QAAA,IAAMQ,KAAK,GAAA,MAASC,QAAQ,CAAmC,sDAAsD,CAAC,CAAA;MAEtHD,QAAAA,KAAK,CAACE,EAAE,CAAC,gBAAgB,EAAEC,gBAAgB,CAAC,CAAA;cAC5CH,KAAK,CAACI,cAAc,CAAC,MAAMpB,cAAc,CAACJ,KAAK,GAAG,IAAI,CAAC,CAAA;cACvDoB,KAAK,CAACK,aAAa,CAAC,MAAMrB,cAAc,CAACJ,KAAK,GAAG,KAAK,CAAC,CAAA;MACvDoB,QAAAA,KAAK,CAACM,cAAc,CAAC,MAAMlB,cAAc,EAAE,CAAC,CAAA;cAE5Cf,aAAa,CAACO,KAAK,GAAGoB,KAAK,CAAA;aAC9B,CAAA,CAAA;MAAA,MAAA,OAAAD,cAAA,CAAAT,KAAA,CAAA,IAAA,EAAAC,SAAA,CAAA,CAAA;MAAA,KAAA;UAED,SAASgB,eAAeA,CAACT,OAA0B,EAAY;YAC3D,IAAIA,OAAO,CAACU,QAAQ,EAAE;MAClB,QAAA,OAAO,CAAC,mBAAmB,EAAE,kBAAkB,CAAC,CAAA;MACpD,OAAC,MACI;MACD,QAAA,OAAO,CAAC,mBAAmB,EAAE,kBAAkB,CAAC,CAAA;MACpD,OAAA;MACJ,KAAA;MAAC,IAAA,SAEcC,eAAeA,GAAA;MAAA,MAAA,OAAAC,gBAAA,CAAApB,KAAA,CAAA,IAAA,EAAAC,SAAA,CAAA,CAAA;MAAA,KAAA;MAAA,IAAA,SAAAmB,gBAAA,GAAA;YAAAA,gBAAA,GAAAlB,iBAAA,CAA9B,aAAgD;MAC5ClB,QAAAA,QAAQ,CAACM,KAAK,CAAC+B,IAAI,CAAC;gBAChBpC,UAAU,EAAEA,UAAU,CAACK,KAAK;gBAC5BJ,QAAQ,EAAEA,QAAQ,CAACI,KAAK;gBACxBE,IAAI,EAAEA,IAAI,CAACF,KAAK;MAChB4B,UAAAA,QAAQ,EAAE,IAAA;MACd,SAAC,CAAC,CAAA;cAEF,IAAI;MAAA,UAAA,IAAAI,oBAAA,CAAA;MACA,UAAA,MAAA,CAAAA,oBAAA,GAAMvC,aAAa,CAACO,KAAK,MAAA,IAAA,IAAAgC,oBAAA,KAAA,KAAA,CAAA,GAAA,KAAA,CAAA,GAAnBA,oBAAA,CAAqBC,MAAM,CAACC,eAAe,CAAC;kBAC9CvC,UAAU,EAAEA,UAAU,CAACK,KAAK;kBAC5BJ,QAAQ,EAAEA,QAAQ,CAACI,KAAK;MACxBmC,YAAAA,YAAY,EAAElC,UAAU,CAACD,KAAK,IAAIoC,SAAS;kBAC3ClC,IAAI,EAAEA,IAAI,CAACF,KAAAA;MACf,WAAC,CAAC,CAAA;eACL,CACD,OAAOe,KAAK,EAAE;MACVrB,UAAAA,QAAQ,CAACM,KAAK,CAACqC,GAAG,EAAE,CAAA;MACpB,UAAA,MAAMtB,KAAK,CAAA;MACf,SAAA;cAEAb,IAAI,CAACF,KAAK,GAAG,EAAE,CAAA;MACfG,QAAAA,YAAY,CAACH,KAAK,GAAGsC,OAAO,EAAE,CAAA;MAE9BC,QAAAA,UAAU,CAAC,MAAM;gBACb,IAAIjC,eAAe,CAACN,KAAK,EAAE;MACvBM,YAAAA,eAAe,CAACN,KAAK,CAACwC,QAAQ,CAAC,CAAC,EAAElC,eAAe,CAACN,KAAK,CAACyC,YAAY,CAAC,CAAA;MACzE,WAAA;eACH,EAAE,EAAE,CAAC,CAAA;aACT,CAAA,CAAA;MAAA,MAAA,OAAAX,gBAAA,CAAApB,KAAA,CAAA,IAAA,EAAAC,SAAA,CAAA,CAAA;MAAA,KAAA;UAED,SAAS+B,cAAcA,CAACxB,OAA0B,EAAQ;YACtD,IAAIA,OAAO,CAACU,QAAQ,EAAE;cAAA,IAAAe,mBAAA,EAAAC,iBAAA,CAAA;MAClBjD,QAAAA,UAAU,CAACK,KAAK,GAAA2C,CAAAA,mBAAA,GAAGzB,OAAO,CAACvB,UAAU,MAAAgD,IAAAA,IAAAA,mBAAA,KAAAA,KAAAA,CAAAA,GAAAA,mBAAA,GAAI,EAAE,CAAA;MAC3C/C,QAAAA,QAAQ,CAACI,KAAK,GAAA4C,CAAAA,iBAAA,GAAG1B,OAAO,CAACtB,QAAQ,MAAAgD,IAAAA,IAAAA,iBAAA,KAAAA,KAAAA,CAAAA,GAAAA,iBAAA,GAAI,EAAE,CAAA;MAC3C,OAAC,MACI;cAAA,IAAAC,kBAAA,EAAAC,oBAAA,CAAA;MACDnD,QAAAA,UAAU,CAACK,KAAK,GAAA6C,CAAAA,kBAAA,GAAG3B,OAAO,CAACtB,QAAQ,MAAAiD,IAAAA,IAAAA,kBAAA,KAAAA,KAAAA,CAAAA,GAAAA,kBAAA,GAAI,EAAE,CAAA;MACzCjD,QAAAA,QAAQ,CAACI,KAAK,GAAA8C,CAAAA,oBAAA,GAAG5B,OAAO,CAACvB,UAAU,MAAAmD,IAAAA,IAAAA,oBAAA,KAAAA,KAAAA,CAAAA,GAAAA,oBAAA,GAAI,EAAE,CAAA;MAC7C,OAAA;MACJ,KAAA;UAMA,SAASvB,gBAAgBA,CAACL,OAAmB,EAAQ;YACjD,IAAM6B,aAAa,GAAGzC,eAAe,CAACN,KAAK,IACpCM,eAAe,CAACN,KAAK,CAACyC,YAAY,GAAGnC,eAAe,CAACN,KAAK,CAACgD,YAAY,GAAG1C,eAAe,CAACN,KAAK,CAACiD,SAAS,GAAG,EAAE,CAAA;YAErHvD,QAAQ,CAACM,KAAK,CAAC+B,IAAI,CAAAmB,cAAA,CAAAA,cAAA,CAAA,EAAA,EACZhC,OAAO,CAAA,EAAA,EAAA,EAAA;MACVU,QAAAA,QAAQ,EAAE,KAAA;aACZ,CAAA,CAAA,CAAA;MAEFW,MAAAA,UAAU,CAAC,MAAM;MACb,QAAA,IAAIjC,eAAe,CAACN,KAAK,IAAI+C,aAAa,EAAE;MACxCzC,UAAAA,eAAe,CAACN,KAAK,CAACmD,MAAM,CAAC;MACzBC,YAAAA,GAAG,EAAE9C,eAAe,CAACN,KAAK,CAACyC,YAAY;MACvCY,YAAAA,QAAQ,EAAE,QAAA;MACd,WAAC,CAAC,CAAA;MACN,SAAA;aACH,EAAE,EAAE,CAAC,CAAA;MACV,KAAA;MAIAvC,IAAAA,aAAa,EAAE,CAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;"}