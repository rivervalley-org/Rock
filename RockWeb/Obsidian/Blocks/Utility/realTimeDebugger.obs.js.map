{"version":3,"file":"realTimeDebugger.obs.js","sources":["../../src/Utility/realTimeDebugger.obs","../../../Rock.JavaScript.Obsidian/node_modules/style-inject/dist/style-inject.es.js"],"sourcesContent":["<!-- Copyright by the Spark Development Network; Licensed under the Rock Community License -->\r\n<template>\r\n    <Block title=\"RealTime Debugger\">\r\n        <template #headerActions>\r\n            <span class=\"action clickable\"\r\n                  @click=\"onClearClick\">\r\n                <i class=\"fa fa-eraser\" title=\"Clear message buffer.\"></i>\r\n            </span>\r\n        </template>\r\n\r\n        <template #preBody>\r\n            <ConnectionStatus :isReconnecting=\"isReconnecting\"\r\n                              :isDisconnected=\"isDisconnected\" />\r\n        </template>\r\n\r\n        <div class=\"d-flex flex-column outer-container\">\r\n            <div ref=\"scrollContainer\"\r\n                 class=\"flex-grow-1 messages-container\">\r\n                <div v-for=\"msg in messages\"\r\n                     class=\"message-container\">\r\n                    <div class=\"message-bubble\">\r\n                        <div class=\"message-text\">\r\n                            <div>Topic: {{ msg.topic }}</div>\r\n                            <div>{{ msg.message }}</div>\r\n                            <pre v-if=\"msg.arguments\" v-html=\"msg.arguments\" />\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            <div class=\"footer\">\r\n                <RockForm @submit=\"onJoinChannel\"\r\n                          :formResetKey=\"formResetKey\">\r\n                    <div class=\"d-flex\">\r\n                        <div class=\"mr-2 topic-input\">\r\n                            <DropDownList v-model=\"topic\"\r\n                                          label=\"Topic\"\r\n                                          :items=\"config.topics\"\r\n                                          :showBlankItem=\"false\"\r\n                                          rules=\"required\" />\r\n                        </div>\r\n                        <div class=\"flex-grow-1 mr-2\">\r\n                            <TextBox v-model=\"channel\"\r\n                                     label=\"Channel\"\r\n                                     rules=\"required\" />\r\n                        </div>\r\n                        <div style=\"margin-top: 26px;\">\r\n                            <RockButton :btnType=\"BtnType.Primary\"\r\n                                        type=\"submit\">Join</RockButton>\r\n                        </div>\r\n                    </div>\r\n                </RockForm>\r\n            </div>\r\n        </div>\r\n    </Block>\r\n</template>\r\n\r\n<style scoped>\r\n.outer-container {\r\n    position: absolute;\r\n    left: 0;\r\n    top: 0;\r\n    right: 0;\r\n    bottom: 0;\r\n}\r\n\r\n.footer {\r\n    border-top: 1px solid #eee;\r\n    padding: 12px;\r\n}\r\n\r\n.footer .topic-input {\r\n    flex-grow: 1;\r\n    max-width: 540px;\r\n}\r\n\r\n.messages-container {\r\n    overflow-y: auto;\r\n    padding: 12px;\r\n}\r\n\r\n.message-container {\r\n    margin: 0px 0px 12px 0px;\r\n    display: flex;\r\n}\r\n\r\n.message-bubble {\r\n    padding: 8px;\r\n    border-radius: 8px;\r\n    background-color: rgb(218, 236, 248);\r\n    color: #333;\r\n}\r\n\r\n.message-text pre {\r\n    background: inherit;\r\n    border: none;\r\n    color: inherit;\r\n    padding: 0px;\r\n    margin: 0px;\r\n}\r\n\r\n.message-text :deep(pre .string) {\r\n    color: green;\r\n}\r\n\r\n.message-text :deep(pre .number) {\r\n    color: darkorange;\r\n}\r\n\r\n.message-text :deep(pre .boolean) {\r\n    color: blue;\r\n}\r\n\r\n.message-text :deep(pre .null) {\r\n    color: magenta;\r\n}\r\n\r\n.message-text :deep(pre .key) {\r\n    color: red;\r\n}\r\n</style>\r\n\r\n<script setup lang=\"ts\">\r\n    import Block from \"@Obsidian/Templates/block\";\r\n    import ConnectionStatus from \"@Obsidian/Controls/connectionStatus.obs\";\r\n    import DropDownList from \"@Obsidian/Controls/dropDownList\";\r\n    import TextBox from \"@Obsidian/Controls/textBox\";\r\n    import RockButton from \"@Obsidian/Controls/rockButton\";\r\n    import RockForm from \"@Obsidian/Controls/rockForm\";\r\n    import { BtnType } from \"@Obsidian/Enums/Controls/btnType\";\r\n    import { ref } from \"vue\";\r\n    import { getTopic, ITopic } from \"@Obsidian/Utility/realTime\";\r\n    import { ListItemBag } from \"@Obsidian/ViewModels/Utility/listItemBag\";\r\n    import { useConfigurationValues, useInvokeBlockAction } from \"@Obsidian/Utility/block\";\r\n    import { newGuid } from \"@Obsidian/Utility/guid\";\r\n\r\n    type Message = {\r\n        topic: string;\r\n        message: string;\r\n        arguments?: string;\r\n    };\r\n\r\n    type Configuration = {\r\n        topics: ListItemBag[];\r\n    };\r\n\r\n    const config = useConfigurationValues<Configuration>();\r\n    const invokeBlockAction = useInvokeBlockAction();\r\n\r\n    // #region Values\r\n\r\n    let realTimeTopics: Record<string, ITopic> = {};\r\n    const messages = ref<Message[]>([]);\r\n    const topic = ref(config.topics.length > 0 ? config.topics[0].value ?? \"\" : \"\");\r\n    const channel = ref(\"\");\r\n    const formResetKey = ref(\"\");\r\n    const isReconnecting = ref(false);\r\n    const isAutoConnecting = ref(false);\r\n    const isDisconnected = ref(false);\r\n    const scrollContainer = ref<HTMLDivElement | null>(null);\r\n    const trackedChannels: { topic: string, channel: string }[] = [];\r\n\r\n    // #endregion\r\n\r\n    // #region Computed Values\r\n\r\n    // #endregion\r\n\r\n    // #region Functions\r\n\r\n    /**\r\n     * Attempt to reconnect to the server and rejoin all channels that were\r\n     * previously joined.\r\n     */\r\n    async function startReconnect(): Promise<void> {\r\n        if (isAutoConnecting.value) {\r\n            return;\r\n        }\r\n\r\n        isAutoConnecting.value = true;\r\n        isReconnecting.value = true;\r\n\r\n        try {\r\n            const reconnectToChannels = [...trackedChannels];\r\n\r\n            trackedChannels.splice(0, trackedChannels.length);\r\n            realTimeTopics = {};\r\n\r\n            for (const tc of reconnectToChannels) {\r\n                await joinChannel(tc.topic, tc.channel);\r\n            }\r\n\r\n            isAutoConnecting.value = false;\r\n            isReconnecting.value = false;\r\n        }\r\n        catch (error) {\r\n            console.error(error instanceof Error ? error.message : error);\r\n            isDisconnected.value = true;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Joins the specified channel.\r\n     *\r\n     * @param topicIdentifier The identifier of the topic whose channel will be joined.\r\n     * @param channelName The name of the channel to join.\r\n     */\r\n    async function joinChannel(topicIdentifier: string, channelName: string): Promise<void> {\r\n        let topic = realTimeTopics[topicIdentifier];\r\n\r\n        if (!topic) {\r\n            topic = await getTopic(topicIdentifier);\r\n\r\n            topic.onMessage((message, args) => messageReceived(topicIdentifier, message, args));\r\n            topic.onReconnecting(() => isReconnecting.value = true);\r\n            topic.onReconnected(() => isReconnecting.value = false);\r\n            topic.onDisconnected(() => startReconnect());\r\n\r\n            realTimeTopics[topicIdentifier] = topic;\r\n        }\r\n\r\n        await invokeBlockAction(\"JoinChannel\", {\r\n            connectionId: topic.connectionId,\r\n            topicIdentifier: topicIdentifier,\r\n            channelName: channelName\r\n        });\r\n\r\n        messages.value.push({\r\n            topic: topicIdentifier,\r\n            message: `Channel \"${channelName}\" was joined.`\r\n        });\r\n\r\n        setTimeout(() => {\r\n            if (scrollContainer.value) {\r\n                scrollContainer.value.scroll({\r\n                    top: scrollContainer.value.scrollHeight,\r\n                    behavior: \"smooth\"\r\n                });\r\n            }\r\n        }, 10);\r\n    }\r\n\r\n    /**\r\n     * Called when the topic receives any message.\r\n     *\r\n     * @param topicIdentifier The topic that received the message.\r\n     * @param message The name of the message that was received.\r\n     * @param args The arguments that were passed to the message.\r\n     */\r\n    function messageReceived(topicIdentifier: string, message: string, args: unknown[]): void {\r\n        const performScroll = scrollContainer.value\r\n            && scrollContainer.value.scrollHeight - scrollContainer.value.offsetHeight - scrollContainer.value.scrollTop < 10;\r\n\r\n        var argsText = syntaxHighlight(JSON.stringify(args, null, 2));\r\n\r\n        messages.value.push({\r\n            topic: topicIdentifier,\r\n            message: `Message: ${message}`,\r\n            arguments: argsText\r\n        });\r\n\r\n        setTimeout(() => {\r\n            if (scrollContainer.value && performScroll) {\r\n                scrollContainer.value.scroll({\r\n                    top: scrollContainer.value.scrollHeight,\r\n                    behavior: \"smooth\"\r\n                });\r\n            }\r\n        }, 10);\r\n    }\r\n\r\n    /**\r\n     * Performs basic syntax highlighting of the JSON string.\r\n     *\r\n     * @param json The JSON string to be highlighted.\r\n     */\r\n    function syntaxHighlight(json: string): string {\r\n        json = json.replace(/&/g, \"&amp;\").replace(/</g, \"&lt;\").replace(/>/g, \"&gt;\");\r\n        return json.replace(/(\"(\\\\u[a-zA-Z0-9]{4}|\\\\[^u]|[^\\\\\"])*\"(\\s*:)?|\\b(true|false|null)\\b|-?\\d+(?:\\.\\d*)?(?:[eE][+-]?\\d+)?)/g, function (match) {\r\n            var cls = \"number\";\r\n            if (/^\"/.test(match)) {\r\n                if (/:$/.test(match)) {\r\n                    cls = \"key\";\r\n                }\r\n                else {\r\n                    cls = \"string\";\r\n                }\r\n            }\r\n            else if (/true|false/.test(match)) {\r\n                cls = \"boolean\";\r\n            }\r\n            else if (/null/.test(match)) {\r\n                cls = \"null\";\r\n            }\r\n\r\n            return `<span class=\"${cls}\">${match}</span>`;\r\n        });\r\n    }\r\n\r\n    // #endregion\r\n\r\n    // #region Event Handlers\r\n\r\n    /**\r\n     * Called in response to the Join button being clicked and the form\r\n     * validation succeding.\r\n     */\r\n    async function onJoinChannel(): Promise<void> {\r\n        await joinChannel(topic.value, channel.value);\r\n\r\n        trackedChannels.push({ topic: topic.value, channel: channel.value });\r\n\r\n        channel.value = \"\";\r\n        formResetKey.value = newGuid();\r\n    }\r\n\r\n    /**\r\n     * Called in response to the Clear button being clicked.\r\n     */\r\n    function onClearClick(): void {\r\n        messages.value.splice(0, messages.value.length);\r\n    }\r\n\r\n        // #endregion\r\n</script>\r\n","function styleInject(css, ref) {\n  if ( ref === void 0 ) ref = {};\n  var insertAt = ref.insertAt;\n\n  if (!css || typeof document === 'undefined') { return; }\n\n  var head = document.head || document.getElementsByTagName('head')[0];\n  var style = document.createElement('style');\n  style.type = 'text/css';\n\n  if (insertAt === 'top') {\n    if (head.firstChild) {\n      head.insertBefore(style, head.firstChild);\n    } else {\n      head.appendChild(style);\n    }\n  } else {\n    head.appendChild(style);\n  }\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nexport default styleInject;\n"],"names":["config","useConfigurationValues","invokeBlockAction","useInvokeBlockAction","realTimeTopics","messages","ref","topic","topics","length","_config$topics$0$valu","value","channel","formResetKey","isReconnecting","isAutoConnecting","isDisconnected","scrollContainer","trackedChannels","startReconnect","_startReconnect","apply","arguments","_asyncToGenerator","reconnectToChannels","splice","_i","_reconnectToChannels","tc","joinChannel","error","console","Error","message","_x","_x2","_joinChannel","topicIdentifier","channelName","getTopic","onMessage","args","messageReceived","onReconnecting","onReconnected","onDisconnected","connectionId","push","concat","setTimeout","scroll","top","scrollHeight","behavior","performScroll","offsetHeight","scrollTop","argsText","syntaxHighlight","JSON","stringify","json","replace","match","cls","test","onJoinChannel","_onJoinChannel","newGuid","onClearClick","styleInject","css","insertAt","document","head","getElementsByTagName","style","createElement","type","firstChild","insertBefore","appendChild","styleSheet","cssText","createTextNode"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;UAkJI,IAAMA,MAAM,GAAGC,sBAAsB,EAAiB,CAAA;UACtD,IAAMC,iBAAiB,GAAGC,oBAAoB,EAAE,CAAA;UAIhD,IAAIC,cAAsC,GAAG,EAAE,CAAA;MAC/C,IAAA,IAAMC,QAAQ,GAAGC,GAAG,CAAY,EAAE,CAAC,CAAA;MACnC,IAAA,IAAMC,KAAK,GAAGD,GAAG,CAACN,MAAM,CAACQ,MAAM,CAACC,MAAM,GAAG,CAAC,GAAA,CAAAC,qBAAA,GAAGV,MAAM,CAACQ,MAAM,CAAC,CAAC,CAAC,CAACG,KAAK,MAAA,IAAA,IAAAD,qBAAA,KAAA,KAAA,CAAA,GAAAA,qBAAA,GAAI,EAAE,GAAG,EAAE,CAAC,CAAA;MAC/E,IAAA,IAAME,OAAO,GAAGN,GAAG,CAAC,EAAE,CAAC,CAAA;MACvB,IAAA,IAAMO,YAAY,GAAGP,GAAG,CAAC,EAAE,CAAC,CAAA;MAC5B,IAAA,IAAMQ,cAAc,GAAGR,GAAG,CAAC,KAAK,CAAC,CAAA;MACjC,IAAA,IAAMS,gBAAgB,GAAGT,GAAG,CAAC,KAAK,CAAC,CAAA;MACnC,IAAA,IAAMU,cAAc,GAAGV,GAAG,CAAC,KAAK,CAAC,CAAA;MACjC,IAAA,IAAMW,eAAe,GAAGX,GAAG,CAAwB,IAAI,CAAC,CAAA;UACxD,IAAMY,eAAqD,GAAG,EAAE,CAAA;MAAC,IAAA,SAclDC,cAAcA,GAAA;MAAA,MAAA,OAAAC,eAAA,CAAAC,KAAA,CAAA,IAAA,EAAAC,SAAA,CAAA,CAAA;MAAA,KAAA;MAAA,IAAA,SAAAF,eAAA,GAAA;YAAAA,eAAA,GAAAG,iBAAA,CAA7B,aAA+C;cAC3C,IAAIR,gBAAgB,CAACJ,KAAK,EAAE;MACxB,UAAA,OAAA;MACJ,SAAA;cAEAI,gBAAgB,CAACJ,KAAK,GAAG,IAAI,CAAA;cAC7BG,cAAc,CAACH,KAAK,GAAG,IAAI,CAAA;cAE3B,IAAI;MACA,UAAA,IAAMa,mBAAmB,GAAG,CAAC,GAAGN,eAAe,CAAC,CAAA;gBAEhDA,eAAe,CAACO,MAAM,CAAC,CAAC,EAAEP,eAAe,CAACT,MAAM,CAAC,CAAA;gBACjDL,cAAc,GAAG,EAAE,CAAA;MAEnB,UAAA,KAAA,IAAAsB,EAAA,GAAA,CAAA,EAAAC,oBAAA,GAAiBH,mBAAmB,EAAAE,EAAA,GAAAC,oBAAA,CAAAlB,MAAA,EAAAiB,EAAA,EAAE,EAAA;MAAjC,YAAA,IAAME,EAAE,GAAAD,oBAAA,CAAAD,EAAA,CAAA,CAAA;kBACT,MAAMG,WAAW,CAACD,EAAE,CAACrB,KAAK,EAAEqB,EAAE,CAAChB,OAAO,CAAC,CAAA;MAC3C,WAAA;gBAEAG,gBAAgB,CAACJ,KAAK,GAAG,KAAK,CAAA;gBAC9BG,cAAc,CAACH,KAAK,GAAG,KAAK,CAAA;eAC/B,CACD,OAAOmB,KAAK,EAAE;MACVC,UAAAA,OAAO,CAACD,KAAK,CAACA,KAAK,YAAYE,KAAK,GAAGF,KAAK,CAACG,OAAO,GAAGH,KAAK,CAAC,CAAA;gBAC7Dd,cAAc,CAACL,KAAK,GAAG,IAAI,CAAA;MAC/B,SAAA;aACH,CAAA,CAAA;MAAA,MAAA,OAAAS,eAAA,CAAAC,KAAA,CAAA,IAAA,EAAAC,SAAA,CAAA,CAAA;MAAA,KAAA;MAAA,IAAA,SAQcO,WAAWA,CAAAK,EAAA,EAAAC,GAAA,EAAA;MAAA,MAAA,OAAAC,YAAA,CAAAf,KAAA,CAAA,IAAA,EAAAC,SAAA,CAAA,CAAA;MAAA,KAAA;MAAA,IAAA,SAAAc,YAAA,GAAA;MAAAA,MAAAA,YAAA,GAAAb,iBAAA,CAA1B,WAA2Bc,eAAuB,EAAEC,WAAmB,EAAiB;MACpF,QAAA,IAAI/B,KAAK,GAAGH,cAAc,CAACiC,eAAe,CAAC,CAAA;cAE3C,IAAI,CAAC9B,KAAK,EAAE;MACRA,UAAAA,KAAK,GAASgC,MAAAA,QAAQ,CAACF,eAAe,CAAC,CAAA;MAEvC9B,UAAAA,KAAK,CAACiC,SAAS,CAAC,CAACP,OAAO,EAAEQ,IAAI,KAAKC,eAAe,CAACL,eAAe,EAAEJ,OAAO,EAAEQ,IAAI,CAAC,CAAC,CAAA;gBACnFlC,KAAK,CAACoC,cAAc,CAAC,MAAM7B,cAAc,CAACH,KAAK,GAAG,IAAI,CAAC,CAAA;gBACvDJ,KAAK,CAACqC,aAAa,CAAC,MAAM9B,cAAc,CAACH,KAAK,GAAG,KAAK,CAAC,CAAA;MACvDJ,UAAAA,KAAK,CAACsC,cAAc,CAAC,MAAM1B,cAAc,EAAE,CAAC,CAAA;MAE5Cf,UAAAA,cAAc,CAACiC,eAAe,CAAC,GAAG9B,KAAK,CAAA;MAC3C,SAAA;cAEA,MAAML,iBAAiB,CAAC,aAAa,EAAE;gBACnC4C,YAAY,EAAEvC,KAAK,CAACuC,YAAY;MAChCT,UAAAA,eAAe,EAAEA,eAAe;MAChCC,UAAAA,WAAW,EAAEA,WAAAA;MACjB,SAAC,CAAC,CAAA;MAEFjC,QAAAA,QAAQ,CAACM,KAAK,CAACoC,IAAI,CAAC;MAChBxC,UAAAA,KAAK,EAAE8B,eAAe;gBACtBJ,OAAO,EAAA,YAAA,CAAAe,MAAA,CAAcV,WAAW,EAAA,gBAAA,CAAA;MACpC,SAAC,CAAC,CAAA;MAEFW,QAAAA,UAAU,CAAC,MAAM;gBACb,IAAIhC,eAAe,CAACN,KAAK,EAAE;MACvBM,YAAAA,eAAe,CAACN,KAAK,CAACuC,MAAM,CAAC;MACzBC,cAAAA,GAAG,EAAElC,eAAe,CAACN,KAAK,CAACyC,YAAY;MACvCC,cAAAA,QAAQ,EAAE,QAAA;MACd,aAAC,CAAC,CAAA;MACN,WAAA;eACH,EAAE,EAAE,CAAC,CAAA;aACT,CAAA,CAAA;MAAA,MAAA,OAAAjB,YAAA,CAAAf,KAAA,CAAA,IAAA,EAAAC,SAAA,CAAA,CAAA;MAAA,KAAA;MASD,IAAA,SAASoB,eAAeA,CAACL,eAAuB,EAAEJ,OAAe,EAAEQ,IAAe,EAAQ;YACtF,IAAMa,aAAa,GAAGrC,eAAe,CAACN,KAAK,IACpCM,eAAe,CAACN,KAAK,CAACyC,YAAY,GAAGnC,eAAe,CAACN,KAAK,CAAC4C,YAAY,GAAGtC,eAAe,CAACN,KAAK,CAAC6C,SAAS,GAAG,EAAE,CAAA;MAErH,MAAA,IAAIC,QAAQ,GAAGC,eAAe,CAACC,IAAI,CAACC,SAAS,CAACnB,IAAI,EAAE,IAAI,EAAE,CAAC,CAAC,CAAC,CAAA;MAE7DpC,MAAAA,QAAQ,CAACM,KAAK,CAACoC,IAAI,CAAC;MAChBxC,QAAAA,KAAK,EAAE8B,eAAe;MACtBJ,QAAAA,OAAO,EAAAe,WAAAA,CAAAA,MAAA,CAAcf,OAAO,CAAE;MAC9BX,QAAAA,SAAS,EAAEmC,QAAAA;MACf,OAAC,CAAC,CAAA;MAEFR,MAAAA,UAAU,CAAC,MAAM;MACb,QAAA,IAAIhC,eAAe,CAACN,KAAK,IAAI2C,aAAa,EAAE;MACxCrC,UAAAA,eAAe,CAACN,KAAK,CAACuC,MAAM,CAAC;MACzBC,YAAAA,GAAG,EAAElC,eAAe,CAACN,KAAK,CAACyC,YAAY;MACvCC,YAAAA,QAAQ,EAAE,QAAA;MACd,WAAC,CAAC,CAAA;MACN,SAAA;aACH,EAAE,EAAE,CAAC,CAAA;MACV,KAAA;UAOA,SAASK,eAAeA,CAACG,IAAY,EAAU;YAC3CA,IAAI,GAAGA,IAAI,CAACC,OAAO,CAAC,IAAI,EAAE,OAAO,CAAC,CAACA,OAAO,CAAC,IAAI,EAAE,MAAM,CAAC,CAACA,OAAO,CAAC,IAAI,EAAE,MAAM,CAAC,CAAA;YAC9E,OAAOD,IAAI,CAACC,OAAO,CAAC,uGAAuG,EAAE,UAAUC,KAAK,EAAE;cAC1I,IAAIC,GAAG,GAAG,QAAQ,CAAA;MAClB,QAAA,IAAI,IAAI,CAACC,IAAI,CAACF,KAAK,CAAC,EAAE;MAClB,UAAA,IAAI,IAAI,CAACE,IAAI,CAACF,KAAK,CAAC,EAAE;MAClBC,YAAAA,GAAG,GAAG,KAAK,CAAA;MACf,WAAC,MACI;MACDA,YAAAA,GAAG,GAAG,QAAQ,CAAA;MAClB,WAAA;eACH,MACI,IAAI,YAAY,CAACC,IAAI,CAACF,KAAK,CAAC,EAAE;MAC/BC,UAAAA,GAAG,GAAG,SAAS,CAAA;eAClB,MACI,IAAI,MAAM,CAACC,IAAI,CAACF,KAAK,CAAC,EAAE;MACzBC,UAAAA,GAAG,GAAG,MAAM,CAAA;MAChB,SAAA;MAEA,QAAA,OAAA,gBAAA,CAAAhB,MAAA,CAAuBgB,GAAG,EAAAhB,KAAAA,CAAAA,CAAAA,MAAA,CAAKe,KAAK,EAAA,SAAA,CAAA,CAAA;MACxC,OAAC,CAAC,CAAA;MACN,KAAA;MAAC,IAAA,SAUcG,aAAaA,GAAA;MAAA,MAAA,OAAAC,cAAA,CAAA9C,KAAA,CAAA,IAAA,EAAAC,SAAA,CAAA,CAAA;MAAA,KAAA;MAAA,IAAA,SAAA6C,cAAA,GAAA;YAAAA,cAAA,GAAA5C,iBAAA,CAA5B,aAA8C;cAC1C,MAAMM,WAAW,CAACtB,KAAK,CAACI,KAAK,EAAEC,OAAO,CAACD,KAAK,CAAC,CAAA;cAE7CO,eAAe,CAAC6B,IAAI,CAAC;gBAAExC,KAAK,EAAEA,KAAK,CAACI,KAAK;gBAAEC,OAAO,EAAEA,OAAO,CAACD,KAAAA;MAAM,SAAC,CAAC,CAAA;cAEpEC,OAAO,CAACD,KAAK,GAAG,EAAE,CAAA;MAClBE,QAAAA,YAAY,CAACF,KAAK,GAAGyD,OAAO,EAAE,CAAA;aACjC,CAAA,CAAA;MAAA,MAAA,OAAAD,cAAA,CAAA9C,KAAA,CAAA,IAAA,EAAAC,SAAA,CAAA,CAAA;MAAA,KAAA;UAKD,SAAS+C,YAAYA,GAAS;MAC1BhE,MAAAA,QAAQ,CAACM,KAAK,CAACc,MAAM,CAAC,CAAC,EAAEpB,QAAQ,CAACM,KAAK,CAACF,MAAM,CAAC,CAAA;MACnD,KAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;MCjUJ,SAAS6D,WAAWA,CAACC,GAAG,EAAEjE,GAAG,EAAE;QAC7B,IAAKA,GAAG,KAAK,KAAK,CAAC,EAAGA,GAAG,GAAG,EAAE,CAAA;MAC9B,EAAA,IAAIkE,QAAQ,GAAGlE,GAAG,CAACkE,QAAQ,CAAA;MAE3B,EAAA,IAAI,CAACD,GAAG,IAAI,OAAOE,QAAQ,KAAK,WAAW,EAAE;MAAE,IAAA,OAAA;MAAQ,GAAA;MAEvD,EAAA,IAAIC,IAAI,GAAGD,QAAQ,CAACC,IAAI,IAAID,QAAQ,CAACE,oBAAoB,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,CAAA;MACpE,EAAA,IAAIC,KAAK,GAAGH,QAAQ,CAACI,aAAa,CAAC,OAAO,CAAC,CAAA;QAC3CD,KAAK,CAACE,IAAI,GAAG,UAAU,CAAA;QAEvB,IAAIN,QAAQ,KAAK,KAAK,EAAE;UACtB,IAAIE,IAAI,CAACK,UAAU,EAAE;YACnBL,IAAI,CAACM,YAAY,CAACJ,KAAK,EAAEF,IAAI,CAACK,UAAU,CAAC,CAAA;MAC3C,KAAC,MAAM;MACLL,MAAAA,IAAI,CAACO,WAAW,CAACL,KAAK,CAAC,CAAA;MACzB,KAAA;MACF,GAAC,MAAM;MACLF,IAAAA,IAAI,CAACO,WAAW,CAACL,KAAK,CAAC,CAAA;MACzB,GAAA;QAEA,IAAIA,KAAK,CAACM,UAAU,EAAE;MACpBN,IAAAA,KAAK,CAACM,UAAU,CAACC,OAAO,GAAGZ,GAAG,CAAA;MAChC,GAAC,MAAM;UACLK,KAAK,CAACK,WAAW,CAACR,QAAQ,CAACW,cAAc,CAACb,GAAG,CAAC,CAAC,CAAA;MACjD,GAAA;MACF;;;;;;;;;;;;;;"}