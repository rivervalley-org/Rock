{"version":3,"file":"decimalRangeFieldComponents.js","sources":["../../../Framework/FieldTypes/decimalRangeFieldComponents.ts"],"sourcesContent":["// <copyright>\r\n// Copyright by the Spark Development Network\r\n//\r\n// Licensed under the Rock Community License (the \"License\");\r\n// you may not use this file except in compliance with the License.\r\n// You may obtain a copy of the License at\r\n//\r\n// http://www.rockrms.com/license\r\n//\r\n// Unless required by applicable law or agreed to in writing, software\r\n// distributed under the License is distributed on an \"AS IS\" BASIS,\r\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n// See the License for the specific language governing permissions and\r\n// limitations under the License.\r\n// </copyright>\r\n//\r\nimport { defineComponent } from \"vue\";\r\nimport { getFieldEditorProps } from \"./utils\";\r\nimport { toNumberOrNull } from \"@Obsidian/Utility/numberUtils\";\r\nimport NumberRangeBox, { NumberRangeModelValue } from \"@Obsidian/Controls/numberRangeBox\";\r\n\r\nexport const EditComponent = defineComponent({\r\n    name: \"DecimalRangeField.Edit\",\r\n\r\n    components: {\r\n        NumberRangeBox\r\n    },\r\n\r\n    props: getFieldEditorProps(),\r\n\r\n    data() {\r\n        return {\r\n            /** The user input value as a number of null if it isn't valid. */\r\n            internalValue: {} as NumberRangeModelValue\r\n        };\r\n    },\r\n\r\n    watch: {\r\n        /**\r\n         * Watch for changes to internalValue and emit the new value out to\r\n         * the consuming component.\r\n         */\r\n        internalValue(): void {\r\n            const value = `${this.internalValue.lower ?? \"\"},${this.internalValue.upper ?? \"\"}`;\r\n\r\n            this.$emit(\"update:modelValue\", value !== \",\" ? value : \"\");\r\n        },\r\n\r\n        /**\r\n         * Watch for changes to modelValue which indicate the component\r\n         * using us has given us a new value to work with.\r\n         */\r\n        modelValue: {\r\n            immediate: true,\r\n            handler(): void {\r\n                const values = (this.modelValue ?? \"\").split(\",\");\r\n                const lower = toNumberOrNull(values[0]);\r\n                const upper = values.length >= 2 ? toNumberOrNull(values[1]) : null;\r\n\r\n                if (lower !== this.internalValue.lower || upper !== this.internalValue.upper) {\r\n                    this.internalValue = {\r\n                        lower: lower,\r\n                        upper: upper\r\n                    };\r\n                }\r\n            }\r\n        }\r\n    },\r\n    template: `\r\n<NumberRangeBox v-model=\"internalValue\" />\r\n`\r\n});\r\n\r\nexport const ConfigurationComponent = defineComponent({\r\n    name: \"DecimalRangeField.Configuration\",\r\n\r\n    template: ``\r\n});\r\n"],"names":["EditComponent","defineComponent","name","components","NumberRangeBox","props","getFieldEditorProps","data","internalValue","watch","_this$internalValue$l","_this$internalValue$u","value","concat","lower","upper","$emit","modelValue","immediate","handler","_this$modelValue","values","split","toNumberOrNull","length","template","ConfigurationComponent"],"mappings":";;;;;;;;;;;;;;;AAqBaA,gBAAAA,aAAa,4BAAGC,eAAe,CAAC;YACzCC,EAAAA,IAAI,EAAE,wBAAwB;YAE9BC,EAAAA,UAAU,EAAE;YACRC,IAAAA,cAAAA;eACH;cAEDC,KAAK,EAAEC,mBAAmB,EAAE;YAE5BC,EAAAA,IAAIA,GAAG;gBACH,OAAO;YAEHC,MAAAA,aAAa,EAAE,EAAC;iBACnB,CAAA;eACJ;YAEDC,EAAAA,KAAK,EAAE;YAKHD,IAAAA,aAAaA,GAAS;kBAAA,IAAAE,qBAAA,EAAAC,qBAAA,CAAA;YAClB,MAAA,IAAMC,KAAK,GAAA,EAAA,CAAAC,MAAA,CAAA,CAAAH,qBAAA,GAAM,IAAI,CAACF,aAAa,CAACM,KAAK,MAAAJ,IAAAA,IAAAA,qBAAA,cAAAA,qBAAA,GAAI,EAAE,EAAA,GAAA,CAAA,CAAAG,MAAA,CAAA,CAAAF,qBAAA,GAAI,IAAI,CAACH,aAAa,CAACO,KAAK,cAAAJ,qBAAA,KAAA,KAAA,CAAA,GAAAA,qBAAA,GAAI,EAAE,CAAE,CAAA;YAEnF,MAAA,IAAI,CAACK,KAAK,CAAC,mBAAmB,EAAEJ,KAAK,KAAK,GAAG,GAAGA,KAAK,GAAG,EAAE,CAAC,CAAA;iBAC9D;YAMDK,IAAAA,UAAU,EAAE;YACRC,MAAAA,SAAS,EAAE,IAAI;YACfC,MAAAA,OAAOA,GAAS;YAAA,QAAA,IAAAC,gBAAA,CAAA;YACZ,QAAA,IAAMC,MAAM,GAAG,CAAA,CAAAD,gBAAA,GAAC,IAAI,CAACH,UAAU,MAAA,IAAA,IAAAG,gBAAA,KAAA,KAAA,CAAA,GAAAA,gBAAA,GAAI,EAAE,EAAEE,KAAK,CAAC,GAAG,CAAC,CAAA;oBACjD,IAAMR,KAAK,GAAGS,cAAc,CAACF,MAAM,CAAC,CAAC,CAAC,CAAC,CAAA;YACvC,QAAA,IAAMN,KAAK,GAAGM,MAAM,CAACG,MAAM,IAAI,CAAC,GAAGD,cAAc,CAACF,MAAM,CAAC,CAAC,CAAC,CAAC,GAAG,IAAI,CAAA;YAEnE,QAAA,IAAIP,KAAK,KAAK,IAAI,CAACN,aAAa,CAACM,KAAK,IAAIC,KAAK,KAAK,IAAI,CAACP,aAAa,CAACO,KAAK,EAAE;sBAC1E,IAAI,CAACP,aAAa,GAAG;YACjBM,YAAAA,KAAK,EAAEA,KAAK;YACZC,YAAAA,KAAK,EAAEA,KAAAA;uBACV,CAAA;YACL,SAAA;YACJ,OAAA;YACJ,KAAA;eACH;cACDU,QAAQ,EAAA,kDAAA;YAGZ,CAAC,GAAC;AAEWC,gBAAAA,sBAAsB,qCAAGzB,eAAe,CAAC;YAClDC,EAAAA,IAAI,EAAE,iCAAiC;cAEvCuB,QAAQ,EAAA,EAAA;YACZ,CAAC;;;;;;;;"}