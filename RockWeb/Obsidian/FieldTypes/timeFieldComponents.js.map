{"version":3,"file":"timeFieldComponents.js","sources":["../../../Framework/FieldTypes/timeFieldComponents.ts"],"sourcesContent":["// <copyright>\r\n// Copyright by the Spark Development Network\r\n//\r\n// Licensed under the Rock Community License (the \"License\");\r\n// you may not use this file except in compliance with the License.\r\n// You may obtain a copy of the License at\r\n//\r\n// http://www.rockrms.com/license\r\n//\r\n// Unless required by applicable law or agreed to in writing, software\r\n// distributed under the License is distributed on an \"AS IS\" BASIS,\r\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n// See the License for the specific language governing permissions and\r\n// limitations under the License.\r\n// </copyright>\r\n//\r\nimport { defineComponent } from \"vue\";\r\nimport { getFieldEditorProps } from \"./utils\";\r\nimport TimePicker, { TimePickerValue } from \"@Obsidian/Controls/timePicker\";\r\nimport { toNumber } from \"@Obsidian/Utility/numberUtils\";\r\nimport { padLeft } from \"@Obsidian/Utility/stringUtils\";\r\n\r\nexport const EditComponent = defineComponent({\r\n    name: \"TimeField.Edit\",\r\n\r\n    components: {\r\n        TimePicker\r\n    },\r\n\r\n    props: getFieldEditorProps(),\r\n\r\n    data() {\r\n        return {\r\n            internalTimeValue: {} as TimePickerValue,\r\n            internalValue: \"\"\r\n        };\r\n    },\r\n\r\n    computed: {\r\n        displayValue(): string {\r\n            if (this.internalTimeValue.hour === undefined || this.internalTimeValue.minute === undefined) {\r\n                return \"\";\r\n            }\r\n\r\n            let hour = this.internalTimeValue.hour;\r\n            const minute = this.internalTimeValue.minute;\r\n            const meridiem = hour >= 12 ? \"PM\" : \"AM\";\r\n\r\n            if (hour > 12) {\r\n                hour -= 12;\r\n            }\r\n\r\n            return `${hour}:${padLeft(minute.toString(), 2, \"0\")} ${meridiem}`;\r\n        },\r\n    },\r\n\r\n    watch: {\r\n        internalValue(): void {\r\n            this.$emit(\"update:modelValue\", this.internalValue);\r\n        },\r\n\r\n        internalTimeValue(): void {\r\n            if (this.internalTimeValue.hour === undefined || this.internalTimeValue.minute === undefined) {\r\n                this.internalValue = \"\";\r\n            }\r\n            else {\r\n                this.internalValue = `${this.internalTimeValue.hour}:${padLeft(this.internalTimeValue.minute.toString(), 2, \"0\")}:00`;\r\n            }\r\n        },\r\n\r\n        modelValue: {\r\n            immediate: true,\r\n            handler(): void {\r\n                const values = /^(\\d+):(\\d+)/.exec(this.modelValue ?? \"\");\r\n\r\n                if (values !== null) {\r\n                    this.internalTimeValue = {\r\n                        hour: toNumber(values[1]),\r\n                        minute: toNumber(values[2])\r\n                    };\r\n                }\r\n                else {\r\n                    this.internalTimeValue = {};\r\n                }\r\n            }\r\n        }\r\n    },\r\n\r\n    template: `\r\n<TimePicker v-model=\"internalTimeValue\" />\r\n`\r\n});\r\n\r\nexport const ConfigurationComponent = defineComponent({\r\n    name: \"TimeField.Configuration\",\r\n\r\n    template: ``\r\n});\r\n"],"names":["EditComponent","defineComponent","name","components","TimePicker","props","getFieldEditorProps","data","internalTimeValue","internalValue","computed","displayValue","hour","undefined","minute","meridiem","concat","padLeft","toString","watch","$emit","modelValue","immediate","handler","_this$modelValue","values","exec","toNumber","template","ConfigurationComponent"],"mappings":"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"}